 # 湖泊水污染扩散模拟系统

## 项目概述

本项目是一个基于Vue.js和Leaflet的湖泊水污染扩散模拟系统，实现了二维对流-扩散模型的数值模拟，支持实时动画展示污染物在水体中的扩散过程。

## 主要功能

### 1. 地图交互
- **湖泊选择**：支持从北京水系数据中选择任意湖泊进行模拟
- **污染源设置**：通过地图点击选择污染源位置
- **多图层管理**：支持网格图层、扩散效果图层、湖泊边界图层的切换显示

### 2. 参数配置
- **污染物参数**：
  - 污染物质量 (kg)
  - 衰减率 (1/天)
- **湖泊参数**：
  - 湖泊深度 (m)
  - 纵向流速 (m/s)
  - 横向流速 (m/s)
  - 纵向弥散系数 (m²/s)
  - 横向弥散系数 (m²/s)
- **网格参数**：
  - 网格间距 (m)
  - 模拟时长 (小时)
  - 时间步长 (分钟)

### 3. 扩散模拟
- **二维对流-扩散模型**：基于Fick扩散定律和Navier-Stokes方程
- **边界控制**：扩散严格限制在湖泊边界内
- **实时动画**：支持时间序列动画展示扩散过程
- **浓度可视化**：使用颜色映射显示污染物浓度分布

## 技术实现

### 1. 扩散模型
```javascript
// 二维对流-扩散方程
∂C/∂t + u·∇C = D∇²C - K₁C
```
其中：
- C：污染物浓度 (mg/L)
- u：流速向量 (m/s)
- D：弥散系数张量 (m²/s)
- K₁：衰减系数 (1/s)

### 2. 数值求解
- **有限差分法**：使用显式差分格式
- **稳定性控制**：确保数值稳定性
- **边界条件**：零梯度边界条件

### 3. 边界检测
- **射线法**：精确判断点是否在多边形内
- **边界框优化**：快速预筛选提高性能
- **双重检查**：生成和显示时双重验证

## 使用说明

### 1. 启动系统
```bash
npm install
npm run dev
```

### 2. 操作流程
1. **选择湖泊**：从下拉菜单选择要模拟的湖泊
2. **生成网格**：点击"生成网格"按钮创建计算网格
3. **设置污染源**：在地图上点击选择污染源位置
4. **配置参数**：调整各项模拟参数
5. **开始模拟**：点击"开始模拟"启动扩散计算
6. **查看结果**：使用时间滑块查看不同时刻的扩散效果

### 3. 参数建议
- **网格间距**：10-50米（平衡精度和性能）
- **模拟时长**：2-6小时（避免计算量过大）
- **时间步长**：5-15分钟（确保数值稳定性）
- **衰减率**：0.1-1.0 1/天（根据污染物特性）

## 性能优化

### 1. 计算优化
- **距离筛选**：400米外直接设为0浓度
- **计算间隔**：减少时间步计算量
- **异步处理**：避免UI阻塞

### 2. 显示优化
- **阈值过滤**：只显示浓度>0.001的点
- **颜色映射**：优化高浓度区域视觉效果
- **图层管理**：模拟时隐藏网格，突出扩散效果

### 3. 内存管理
- **网格点数控制**：根据湖泊大小动态调整
- **时间步优化**：插值填充减少存储需求
- **图层清理**：及时清除不需要的图层

## 文件结构

```
Vue-Water-Pollution-Sim/
├── src/
│   ├── components/
│   │   └── LakePollutionSimulation.vue  # 主要模拟组件
│   ├── App.vue                          # 主应用组件
│   └── main.js                          # 应用入口
├── Beijing-GeoJson/                     # 北京水系地理数据
├── Reference-Project-Springboot-water-pollution-sim/  # 参考项目
└── 湖泊水污染扩散模拟系统说明.md        # 本说明文档
```

## 技术栈

- **前端框架**：Vue.js 3
- **地图库**：Leaflet
- **构建工具**：Vite
- **地理数据**：GeoJSON格式
- **数值计算**：JavaScript原生实现

## 注意事项

1. **浏览器兼容性**：建议使用现代浏览器（Chrome、Firefox、Safari）
2. **性能考虑**：大型湖泊可能需要较长计算时间
3. **参数设置**：不合理的参数可能导致数值不稳定
4. **数据精度**：地理坐标精度影响边界检测准确性

## 扩展功能

- **多污染源**：支持多个污染源同时模拟
- **三维模型**：扩展到三维扩散模拟
- **实时数据**：接入实时监测数据
- **预测分析**：基于历史数据的预测功能
- **报告生成**：自动生成模拟报告

## 联系方式

如有问题或建议，请联系开发团队。