import{_ as Uo,r as Cn,o as v,c as g,a as n,b as ke,w as Fe,t as L,d as En,e as An,f as $n,g as Sn,h as Pn,i as b,j as me,k as Oo,l as Fn,n as Be,m as Dn,p as W,q as k,v as zn,s as G,u as z,x as fe,y as O,z as f,F as we,A as xe,B as Le,C as Zo,D as Tn,E}from"./index-cd00da37.js";import{_ as In}from"./è¿”å› (2)-4856710b.js";const Nn="/icons/æ‰“å¼€mxd.png",_n="/icons/æ”¾å¤§.png",jn="/icons/ç¼©å°.png",Vn="/icons/å…¨å›¾.png",Bn="/icons/æ‰‹.png",Rn="/icons/é€‰æ‹©è¦ç´ .png",On="/icons/æŸ¥è¯¢.png",Zn="/icons/æ¸²æŸ“.png",Un="/icons/è¯†åˆ«è¦ç´ .png",Wn="/icons/æ ‡æ³¨.png",Yn="/icons/å·¦ç®­å¤´.png",Hn="/icons/å³ç®­å¤´.png";const Xn={name:"MapEditorHeader",props:{title:{type:String,default:"ç”µå­åœ°å›¾ç¼–è¾‘"}}},qn={class:"header"},Gn={class:"header-content"},Qn={class:"logo-container"},Jn={class:"title"},Kn={class:"title-icons"};function el(Wo,s,re,ye,Me,Ce){const I=Cn("router-link");return v(),g("header",qn,[n("div",Gn,[n("div",Qn,[ke(I,{to:"/",class:"back-button",title:"è¿”å›ä¸»é¡µ"},{default:Fe(()=>s[0]||(s[0]=[n("img",{src:In,alt:"è¿”å›",width:"32",height:"32"},null,-1)])),_:1,__:[0]})]),n("h1",Jn,L(re.title),1),n("div",Kn,[ke(I,{to:"/map-editor",class:"action-icon",title:"ç”µå­åœ°å›¾ç¼–è¾‘"},{default:Fe(()=>s[1]||(s[1]=[n("img",{src:En,alt:"ç”µå­åœ°å›¾ç¼–è¾‘",width:"32",height:"32"},null,-1)])),_:1,__:[1]}),ke(I,{to:"/data-management",class:"action-icon",title:"æ•°æ®ç®¡ç†"},{default:Fe(()=>s[2]||(s[2]=[n("img",{src:An,alt:"æ•°æ®ç®¡ç†",width:"32",height:"32"},null,-1)])),_:1,__:[2]}),ke(I,{to:"/statistics-analysis",class:"action-icon",title:"ç»Ÿè®¡åˆ†æ"},{default:Fe(()=>s[3]||(s[3]=[n("img",{src:$n,alt:"ç»Ÿè®¡åˆ†æ",width:"32",height:"32"},null,-1)])),_:1,__:[3]}),ke(I,{to:"/prediction-simulation",class:"action-icon",title:"æ°´ä½é¢„è­¦"},{default:Fe(()=>s[4]||(s[4]=[n("img",{src:Sn,alt:"æ°´ä½é¢„è­¦",width:"32",height:"32"},null,-1)])),_:1,__:[4]}),ke(I,{to:"/water-pollution-simulation",class:"action-icon",title:"æ°´æ±¡æŸ“æ‰©æ•£æ¨¡æ‹Ÿ"},{default:Fe(()=>s[5]||(s[5]=[n("img",{src:Pn,alt:"æ°´æ±¡æŸ“æ‰©æ•£æ¨¡æ‹Ÿ",width:"32",height:"32"},null,-1)])),_:1,__:[5]})])])])}const ol=Uo(Xn,[["render",el],["__scopeId","data-v-7f81c3ed"]]);const tl={class:"map-editor-container"},nl={class:"map-editor-content"},ll={class:"panel-header"},sl={class:"panel-content"},al={class:"layer-control"},il={class:"layer-color-control"},rl={class:"layer-control"},ul={class:"layer-color-control"},cl={class:"layer-control"},dl={class:"layer-color-control"},vl={class:"layer-control"},gl={class:"layer-color-control"},pl={class:"layer-control"},ml={class:"layer-color-control"},fl={key:0,class:"reservoir-img-panel"},yl=["src","alt"],hl={class:"reservoir-img-title"},bl={key:1,class:"reservoir-details"},wl={class:"details-table"},xl={class:"detail-row"},Ll={class:"detail-value"},kl={class:"detail-row"},Ml={class:"detail-value"},Cl={class:"detail-row"},El={class:"detail-value"},Al={class:"detail-row"},$l={class:"detail-value"},Sl={class:"detail-row"},Pl={class:"detail-value"},Fl={class:"detail-row"},Dl={class:"detail-value"},zl={class:"detail-row"},Tl={class:"detail-value"},Il={class:"detail-row"},Nl={class:"detail-value"},_l={class:"reservoir-buttons"},jl={key:2,class:"monitoring-point-details"},Vl={class:"details-table"},Bl={class:"detail-row"},Rl={class:"detail-value"},Ol={key:0,class:"detail-row"},Zl={class:"detail-value"},Ul={key:1,class:"detail-row"},Wl={class:"detail-value"},Yl={key:2,class:"detail-row"},Hl={class:"detail-value"},Xl={key:3,class:"detail-row"},ql={class:"detail-value"},Gl={key:4,class:"detail-row"},Ql={class:"detail-value"},Jl={key:5,class:"detail-row"},Kl={class:"detail-value"},es={key:6,class:"detail-row"},os={class:"detail-value"},ts={key:1,class:"reservoir-params-panel"},ns={class:"params-title"},ls={class:"params-content"},ss={key:0,class:"params-table"},as={key:0},is={class:"param-label"},rs={class:"param-value"},us={key:1},cs={class:"param-label"},ds={class:"param-value"},vs={key:1,class:"no-data"},gs={key:2,class:"flood-history-panel"},ps={class:"history-content"},ms={key:0,class:"history-section"},fs={key:1,class:"history-section"},ys={key:2,class:"history-section"},hs={key:3,class:"history-section"},bs={key:4,class:"history-section"},ws={key:5,class:"history-section"},xs={key:6,class:"history-section"},Ls={key:7,class:"history-section"},ks={key:8,class:"history-section"},Ms={key:9,class:"history-section"},Cs={key:10,class:"history-section"},Es={key:11,class:"history-section"},As={key:12,class:"history-section"},$s={key:13,class:"history-section"},Ss={key:14,class:"history-section"},Ps={key:15,class:"history-section"},Fs={key:16,class:"history-section"},Ds={key:17,class:"history-section"},zs={key:18,class:"history-section"},Ts={key:19,class:"history-section"},Is={key:20,class:"history-section"},Ns={key:21,class:"history-section"},_s={key:22,class:"history-section"},js={key:23,class:"history-section"},Vs={key:24,class:"history-section"},Bs={key:25,class:"history-section"},Rs={class:"custom-toolbar"},Os={class:"zoom-dropdown-container"},Zs={key:0,class:"zoom-dropdown"},Us={class:"zoom-dropdown-container zoom-out-container"},Ws={key:0,class:"zoom-dropdown"},Ys={class:"search-bar-container"},Hs={class:"search-header-controls"},Xs={class:"layer-selection"},qs={class:"search-input-container"},Gs=["placeholder"],Qs={key:0,class:"search-error"},Js={key:4,class:"loading-overlay"},Ks={class:"loading-progress"},ea={class:"progress-bar"},oa={class:"progress-text"},ta={key:5,class:"mxd-control-panel"},na={class:"mxd-panel-header"},la={class:"mxd-panel-content"},sa={class:"mxd-layer-list"},aa={class:"mxd-layer-group"},ia={class:"mxd-layer-items"},ra=["id","onUpdate:modelValue","onChange"],ua=["for"],ca={class:"layer-name"},da={key:0,class:"mxd-layer-item"},va={class:"render-modal-content"},ga={class:"render-modal-controls"},pa={class:"render-modal-body"},ma={class:"render-row"},fa={class:"render-row"},ya=["value"],ha={class:"render-row"},ba=["value"],wa={key:0,class:"render-error"},xa={key:7,class:"legend-panel"},La={class:"legend-header"},ka={class:"legend-content"},Ma={class:"legend-text"},Ca={class:"legend-range"},Ea={class:"legend-count"},Aa={class:"annotation-panel-controls"},$a={class:"annotation-panel-content"},Sa={class:"annotation-section"},Pa={class:"control-item"},Fa={class:"control-item"},Da=["value"],za={class:"annotation-section"},Ta={class:"control-item"},Ia={class:"control-item"},Na={class:"control-item"},_a={class:"annotation-section"},ja={class:"control-item"},Va={class:"control-item"},Ba={class:"annotation-section"},Ra={class:"control-item"},Oa={class:"control-item"},Za={class:"control-item"},Ua={class:"control-item"},Wa={class:"control-item"},Ya={class:"control-item"},Ha={class:"control-item"},Xa={class:"control-item"},qa={__name:"MapEditor",setup(Wo){const s=b(null),re=b(!0),ye=b(0),Me=b(null),Ce=b(null),I=b(new Set),Ee=b(new Map),De=b(!0),F=me({districts:!0,waterLines:!0,beijingReservoirs:!0,settlements:!1,monitoringPoints:!0}),M=me({districts:"#b3e5fc",waterLines:"#64B5F6",beijingReservoirs:"#26C6DA",settlements:"#FFF176",monitoringPoints:"#FF5722"}),P=me({districts:null,waterLines:null,beijingReservoirs:null,settlements:null,monitoringPoints:null}),Yo=()=>{console.log("å¼€å§‹åˆå§‹åŒ–åœ°å›¾...");try{if(!document.getElementById("editor-map")){console.error("åœ°å›¾å®¹å™¨ä¸å­˜åœ¨");return}s.value=E.map("editor-map",{zoomControl:!1,attributionControl:!1,preferCanvas:!0,updateWhenZooming:!1,updateWhenIdle:!0,keepBuffer:2,maxZoom:18,minZoom:5,inertia:!0,inertiaDeceleration:3e3,inertiaMaxSpeed:3e3,renderer:E.canvas({padding:.5})}).setView([39.9042,116.4074],10),console.log("åœ°å›¾å¯¹è±¡åˆ›å»ºæˆåŠŸ:",s.value);try{E.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors",updateWhenIdle:!0,updateWhenZooming:!1,keepBuffer:2,maxNativeZoom:18,maxZoom:18}).addTo(s.value),console.log("åº•å›¾æ·»åŠ æˆåŠŸ")}catch(t){console.log("åº•å›¾åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨ç©ºç™½åœ°å›¾:",t)}let e;s.value.on("move",()=>{clearTimeout(e),e=setTimeout(()=>{if(s.value){const t=s.value.getCenter(),l=s.value.getZoom();Te(t,l)}},100)}),Te([39.9042,116.4074],10),et(),console.log("åœ°å›¾åˆå§‹åŒ–å®Œæˆ")}catch(o){console.error("åœ°å›¾åˆå§‹åŒ–å¤±è´¥:",o),h("âŒ åœ°å›¾åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•","warning")}},Ho=async()=>{console.log("=== å¼€å§‹åŠ è½½åœ°ç†æ•°æ® ===");const e=setTimeout(()=>{console.log("æ•°æ®åŠ è½½è¶…æ—¶ï¼Œå¼ºåˆ¶å…³é—­åŠ è½½çŠ¶æ€"),re.value=!1,Re()},5e3),t={districts:"./Beijing-GeoJson-Tzy/åŒ—äº¬åŒºå¿ç•Œ.json",waterLines:"./Beijing-GeoJson-Tzy/åŒ—äº¬å¸‚_æ°´ç³»çº¿æ•°æ®.json",beijingReservoirs:"./Beijing-GeoJson-Tzy/åŒ—äº¬å¸‚æ°´åº“é¢.geojson",settlements:"./Beijing-GeoJson-Tzy/å±…æ°‘åœ°åœ°å.json",monitoringPoints:"./Beijing-GeoJson-Tzy/ç›‘æµ‹ç‚¹.geojson"};console.log("æ•°æ®æ–‡ä»¶é…ç½®:",t);let l=0;const i=Object.keys(t).length;let a=!1;for(const[u,c]of Object.entries(t))try{console.log(`æ­£åœ¨åŠ è½½${u}æ•°æ®:`,c);const p=await Promise.race([fetch(c),new Promise((y,D)=>setTimeout(()=>D(new Error("è¯·æ±‚è¶…æ—¶")),3e3))]);if(!p.ok)throw new Error(`HTTP ${p.status}: ${p.statusText}`);const d=await p.json();console.log(`${u}æ•°æ®åŠ è½½æˆåŠŸï¼Œè¦ç´ æ•°é‡:`,d.features?d.features.length:"æœªçŸ¥"),d.features&&d.features.length>0&&(console.log("  - ç¬¬ä¸€ä¸ªè¦ç´ å±æ€§:",d.features[0].properties),console.log("  - å±æ€§å­—æ®µåˆ—è¡¨:",Object.keys(d.features[0].properties)));const m=Xo(u,d);m?(console.log("  - å›¾å±‚åˆ›å»ºæˆåŠŸ:",m),console.log("  - å›¾å±‚ç±»å‹:",m.constructor.name),console.log("  - æ˜¯å¦æœ‰eachLayeræ–¹æ³•:",!!m.eachLayer),P[u]=m,a=!0,F[u]?(m.addTo(s.value),u==="beijingReservoirs"&&m.bringToFront(),console.log("  - å›¾å±‚å·²æ·»åŠ åˆ°åœ°å›¾")):console.log(`  - å›¾å±‚æœªæ·»åŠ åˆ°åœ°å›¾ï¼ˆlayers[${u}] = falseï¼‰`)):console.error("  - å›¾å±‚åˆ›å»ºå¤±è´¥"),l++,ye.value=Math.round(l/i*100),console.log(`è¿›åº¦: ${l}/${i} (${ye.value}%)`)}catch(p){console.error(`âŒ åŠ è½½${u}æ•°æ®å¤±è´¥:`,p),l++,ye.value=Math.round(l/i*100)}if(clearTimeout(e),re.value=!1,console.log("=== æ•°æ®åŠ è½½å®Œæˆ ==="),console.log("æˆåŠŸåŠ è½½çš„å›¾å±‚æ•°é‡:",Object.keys(P).length),console.log("å›¾å±‚å¯¹è±¡çŠ¶æ€:",P),!a)console.warn("âŒ æ‰€æœ‰æ•°æ®åŠ è½½å¤±è´¥ï¼Œæ˜¾ç¤ºåŸºæœ¬åœ°å›¾"),Re();else try{Lo(),console.log("âœ… åœ°å›¾è¾¹ç•Œè®¡ç®—å®Œæˆ")}catch(u){console.error("âŒ è®¡ç®—åœ°å›¾è¾¹ç•Œå¤±è´¥:",u)}},Xo=(o,e)=>{try{const t={renderer:E.canvas({padding:.5}),interactive:!0,smoothFactor:1,simplifyTolerance:.5};let l;return o==="monitoringPoints"?l=E.geoJSON(e,{...t,pointToLayer:(i,a)=>E.circleMarker(a,Oe(o)),onEachFeature:(i,a)=>{i.properties&&a.bindPopup(Ze(o,i.properties))}}):o==="beijingReservoirs"?l=E.geoJSON(e,{...t,style:Oe(o),onEachFeature:(i,a)=>{i.properties&&a.bindPopup(Ze("reservoirArea",i.properties))}}):o==="settlements"?l=E.geoJSON(e,{...t,pointToLayer:(i,a)=>E.circleMarker(a,Oe(o)),onEachFeature:(i,a)=>{i.properties&&a.bindPopup(Ze(o,i.properties))}}):l=E.geoJSON(e,{...t,style:Oe(o),onEachFeature:(i,a)=>{i.properties&&a.bindPopup(Ze(o,i.properties))}}),l}catch(t){return console.error(`åˆ›å»º${o}å›¾å±‚å¤±è´¥:`,t),null}},Re=()=>{if(!s.value)return;console.log("æ˜¾ç¤ºåŸºæœ¬åœ°å›¾");const o=[39.9042,116.4074];E.marker(o).addTo(s.value).bindPopup("åŒ—äº¬å¸‚ä¸­å¿ƒ").openPopup();const e=E.latLngBounds([39.4,115.7],[40.4,117.4]);E.rectangle(e,{color:"#1890ff",weight:2,fillOpacity:.1}).addTo(s.value),s.value.fitBounds(e),h("âœ… åœ°å›¾å·²åŠ è½½å®Œæˆï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨","success")},Oe=o=>({districts:{fillColor:M.districts,weight:2.5,opacity:.8,color:M.districts,fillOpacity:.5,dashArray:"5, 8"},waterLines:{color:M.waterLines,weight:2.5,opacity:.9},beijingReservoirs:{fillColor:M.beijingReservoirs,weight:1.5,opacity:.9,color:M.beijingReservoirs,fillOpacity:.8},settlements:{radius:6,fillColor:M.settlements,color:"#ffffff",weight:1.5,opacity:1,fillOpacity:.9},monitoringPoints:{radius:8,fillColor:M.monitoringPoints,color:"#fff",weight:2,opacity:1,fillOpacity:.95}})[o]||{},Ze=(o,e)=>{let t='<div class="popup-content">';const l=["Id","Shape__"];o==="reservoirArea"&&l.push("osm_id","code","fclass","name","FID_1","F11");const i={name:"æ°´åº“å",NAME:"æ°´åº“å",å¹´å¹³å‡æ°¨æ°®:"å¹´å¹³å‡æ°¨æ°®",å¹´å¹³å‡é«˜çŒ›é…¸ç›:"å¹´å¹³å‡é«˜çŒ›é…¸ç›",å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡:"å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡",å¹´å¹³å‡æµé‡:"å¹´å¹³å‡æµé‡",å¹´å¹³å‡æ°´æ·±:"å¹´å¹³å‡æ°´æ·±",å¹´å¹³å‡æ€»æ°®:"å¹´å¹³å‡æ€»æ°®",å¹´å¹³å‡æ€»ç£·:"å¹´å¹³å‡æ€»ç£·"},a={åº“å:"",å¤šå¹´å¹³å‡åº“æ°´ä½:"m",å¤šå¹´å¹³å‡è“„æ°´é‡:"ä¸‡mÂ³",å¤šå¹´æ—¥å¹³å‡å…¥åº“æµé‡:"mÂ³/s",å¤šå¹´æ—¥å¹³å‡å‡ºåº“æµé‡:"mÂ³/s",æ€»åº“å®¹:"ä¸‡mÂ³",æ±›é™æ°´ä½:"m"},u={åº“å:"æ°´åº“åç§°",å¤šå¹´å¹³å‡åº“æ°´ä½:"å¤šå¹´å¹³å‡åº“æ°´ä½",å¤šå¹´å¹³å‡è“„æ°´é‡:"å¤šå¹´å¹³å‡è“„æ°´é‡",å¤šå¹´æ—¥å¹³å‡å…¥åº“æµé‡:"å¤šå¹´æ—¥å¹³å‡å…¥åº“æµé‡",å¤šå¹´æ—¥å¹³å‡å‡ºåº“æµé‡:"å¤šå¹´æ—¥å¹³å‡å‡ºåº“æµé‡",æ€»åº“å®¹:"æ€»åº“å®¹",æ±›é™æ°´ä½:"æ±›é™æ°´ä½"};if(o==="reservoirArea"){const c=e.name||e.åº“å||e.NAME;c&&(t+=`<div style="font-size: 18px; font-weight: bold; color: #2c3e50; margin-bottom: 15px; text-align: center; border-bottom: 2px solid #3498db; padding-bottom: 8px;">ğŸï¸ ${c}</div>`);const p=["æ€»åº“å®¹","å¤šå¹´å¹³å‡åº“æ°´ä½","å¤šå¹´å¹³å‡è“„æ°´é‡","æ±›é™æ°´ä½"];for(const d of p)if(e[d]&&e[d]!==0){const m=a[d]||"",y=u[d]||d;t+=`<div style="margin: 8px 0; padding: 5px; background: #f8f9fa; border-radius: 4px;"><strong>${d==="æ€»åº“å®¹"?"ğŸ“Š":d==="å¤šå¹´å¹³å‡åº“æ°´ä½"?"ğŸŒŠ":d==="å¤šå¹´å¹³å‡è“„æ°´é‡"?"ğŸ’§":"âš ï¸"} ${y}:</strong> <span style="color: #e74c3c; font-weight: bold;">${e[d]}${m?` ${m}`:""}</span></div>`}for(const[d,m]of Object.entries(e))if(!(l.includes(d)||p.includes(d))&&m!=null&&m!==0){const y=a[d]||"",D=u[d]||d;t+=`<div style="margin: 5px 0;"><strong>${D}:</strong> ${m}${y?` ${y}`:""}</div>`}c&&["æ€€æŸ”æ°´åº“","å¯†äº‘æ°´åº“","åŒ—å°ä¸Šæ°´åº“","åä¸‰é™µæ°´åº“","å®˜å…æ°´åº“","å´‡é’æ°´åº“","æ–‹å ‚æ°´åº“"].includes(c)&&(t+='<div style="margin-top: 10px; padding: 8px; background: #e8f4fd; border-left: 4px solid #3498db; border-radius: 4px;"><strong>ğŸ“š é˜²æ´ªå†å²:</strong> è¯¥æ°´åº“æœ‰è¯¦ç»†çš„é˜²æ´ªå†å²è®°å½•ï¼Œè¯·æŸ¥çœ‹å³ä¾§é¢æ¿ã€‚</div>')}else if(o==="monitoringPoints")for(const[c,p]of Object.entries(e)){if(l.includes(c))continue;const d=i[c]||c,m=fo[c]||"";t+=`<div><strong>${d}:</strong> ${p??"æœªçŸ¥"}${m?` ${m}`:""}</div>`}else for(const[c,p]of Object.entries(e)){if(l.includes(c))continue;let d="";o==="reservoirArea"?d=a[c]||"":d=fo[c]||"",t+=`<div><strong>${c}:</strong> ${p??"æœªçŸ¥"}${d?` ${d}`:""}</div>`}return t+="</div>",t},ze=o=>{const e=P[o];e&&(F[o]?s.value.hasLayer(e)||(e.addTo(s.value),(o==="waterAreas"||o==="reservoirs")&&e.bringToFront()):s.value.hasLayer(e)&&s.value.removeLayer(e),setTimeout(()=>{Lo()},100))},qo=()=>{H(),ce.value=!1,console.log("æ¿€æ´»æŒ‰ç‚¹æ”¾å¤§æ¨¡å¼ï¼Œç­‰å¾…ç”¨æˆ·å•å‡»"),Be(()=>{const o=document.getElementById("editor-map");o&&(console.log("åœ°å›¾å®¹å™¨CSSç±»:",o.className),console.log("æ˜¯å¦åŒ…å«zoom-in-cursorç±»:",o.classList.contains("zoom-in-cursor")),console.log("å½“å‰é¼ æ ‡æ ·å¼:",getComputedStyle(o).cursor))}),s.value&&(s.value.dragging.disable(),console.log("å·²ç¦ç”¨åœ°å›¾æ‹–æ‹½åŠŸèƒ½")),setTimeout(()=>{cn();const o=document.getElementById("editor-map");o&&o.classList.add("zoom-in-cursor")},100),h("ğŸ” è¯·åœ¨åœ°å›¾ä¸Šå•å‡»è¿›è¡Œæ”¾å¤§","info")},Go=()=>{H(),ne.value=!1,console.log("æ¿€æ´»æŒ‰ç‚¹ç¼©å°æ¨¡å¼ï¼Œç­‰å¾…ç”¨æˆ·å•å‡»"),Be(()=>{const o=document.getElementById("editor-map");o&&(console.log("åœ°å›¾å®¹å™¨CSSç±»:",o.className),console.log("æ˜¯å¦åŒ…å«zoom-out-cursorç±»:",o.classList.contains("zoom-out-cursor")),console.log("å½“å‰é¼ æ ‡æ ·å¼:",getComputedStyle(o).cursor))}),s.value&&(s.value.dragging.disable(),console.log("å·²ç¦ç”¨åœ°å›¾æ‹–æ‹½åŠŸèƒ½")),setTimeout(()=>{dn();const o=document.getElementById("editor-map");o&&o.classList.add("zoom-out-cursor")},100),h("ğŸ” è¯·åœ¨åœ°å›¾ä¸Šå•å‡»è¿›è¡Œç¼©å°","info")},Qo=()=>{console.log("=== æ¿€æ´»æ‹‰æ¡†ç¼©å°æ¨¡å¼ ==="),console.log("æ¿€æ´»å‰çš„çŠ¶æ€:",{zoomMode:N.value,isDrawing:T.value}),H(),ne.value=!1,console.log("æ¿€æ´»åçš„çŠ¶æ€:",{zoomMode:N.value,isDrawing:T.value}),N.value="rectangle",console.log("è®¾ç½®zoomModeä¸ºrectangleåçš„çŠ¶æ€:",{zoomMode:N.value,isDrawing:T.value}),Bo()},Jo=()=>{if(H(),console.log("æ¿€æ´»å¹³ç§»æ¨¡å¼"),s.value){s.value.dragging.enable(),_t();const o=document.getElementById("editor-map");o&&(o.style.cursor="grab",o.classList.add("panning")),console.log("å¹³ç§»æ¨¡å¼å·²æ¿€æ´»ï¼Œæ€§èƒ½ä¼˜åŒ–å·²åº”ç”¨")}},Ko=()=>{De.value=!De.value},Ae=b(!1),et=()=>{if(s.value){console.log("è®¾ç½®åœ°å›¾äº‹ä»¶ç›‘å¬å™¨");let o;s.value.on("dragstart",()=>{Ae.value=!0,o=Date.now(),console.log("å¼€å§‹æ‹–æ‹½")}),s.value.on("drag",()=>{Ae.value||(Ae.value=!0)}),s.value.on("dragend",()=>{Ae.value=!1;const t=Date.now()-o;console.log(`æ‹–æ‹½ç»“æŸï¼ŒæŒç»­æ—¶é—´: ${t}ms`),setTimeout(()=>{s.value},50)}),s.value.on("click",no),console.log("åœ°å›¾ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨å·²ç»‘å®š");let e;s.value.on("move",()=>{e||(e=setTimeout(()=>{e=null},16))}),s.value.on("zoomend",()=>{ro(),setTimeout(()=>{r.annotations.forEach(t=>{t.isVisible&&t.layer&&io(t)})},100)}),s.value.on("resize",()=>{console.log("åœ°å›¾å¤§å°å˜åŒ–ï¼Œé‡æ–°å®šä½æ ‡æ³¨"),setTimeout(()=>{So()},100)}),console.log("åœ°å›¾äº‹ä»¶ç›‘å¬å™¨è®¾ç½®å®Œæˆï¼Œæ€§èƒ½ä¼˜åŒ–å·²åº”ç”¨")}else console.error("åœ°å›¾æœªåˆå§‹åŒ–ï¼Œæ— æ³•è®¾ç½®äº‹ä»¶ç›‘å¬å™¨")},ot=()=>{H(),console.log("æ¿€æ´»è¦ç´ é€‰æ‹©æ¨¡å¼");const o=document.getElementById("editor-map");o&&(o.style.cursor="pointer",console.log("å·²è®¾ç½®é€‰æ‹©è¦ç´ é¼ æ ‡æ ·å¼ä¸ºpointer")),h("ğŸ‘† è¯·ç‚¹å‡»åœ°å›¾ä¸Šçš„è¦ç´ è¿›è¡Œé€‰æ‹©ï¼Œå†æ¬¡ç‚¹å‡»å¯å–æ¶ˆé€‰æ‹©","info")},tt=()=>{H(),console.log("æ¿€æ´»è¦ç´ è¯†åˆ«æ¨¡å¼");const o=document.getElementById("editor-map");o&&(o.style.cursor="help",console.log("å·²è®¾ç½®è¯†åˆ«è¦ç´ é¼ æ ‡æ ·å¼ä¸ºhelp")),h("â“ è¯·ç‚¹å‡»åœ°å›¾ä¸Šçš„è¦ç´ è¿›è¡Œè¯†åˆ«","info")},wo=()=>{if(s.value){if(console.log("æ‰§è¡Œå…¨å›¾è§†å›¾åŠŸèƒ½"),te.value){console.log("ä½¿ç”¨é¢„è®¡ç®—çš„å®Œæ•´è¾¹ç•Œ:",te.value),lo(te.value,"é¢„è®¡ç®—è¾¹ç•Œ");return}console.log("æ²¡æœ‰é¢„è®¡ç®—çš„è¾¹ç•Œï¼Œå®æ—¶è®¡ç®—...");const o=[];if(Object.keys(F).forEach(e=>{if(F[e]&&P[e]){const t=P[e];if(t&&t.getBounds)try{const l=t.getBounds();l&&l.isValid&&l.isValid()&&(console.log(`${e}å›¾å±‚è¾¹ç•Œ:`,l),o.push(l))}catch(l){console.log(`è·å–${e}å›¾å±‚è¾¹ç•Œå¤±è´¥:`,l)}}}),console.log("æ”¶é›†åˆ°çš„è¾¹ç•Œæ•°é‡:",o.length),o.length>0){let e=o[0];for(let t=1;t<o.length;t++)e=e.extend(o[t]);console.log("åˆå¹¶åçš„è¾¹ç•Œ:",e),e&&e.isValid&&e.isValid()?lo(e,"å®æ—¶è®¡ç®—è¾¹ç•Œ"):(console.log("åˆå¹¶åçš„è¾¹ç•Œæ— æ•ˆï¼Œå›é€€åˆ°é»˜è®¤è§†å›¾"),xo())}else console.log("æ²¡æœ‰æœ‰æ•ˆçš„è¾¹ç•Œï¼Œå›é€€åˆ°é»˜è®¤è§†å›¾"),xo()}},lo=(o,e)=>{if(!s.value||!o)return;console.log(`ä½¿ç”¨${e}æ˜¾ç¤ºå…¨å›¾:`,o);const t=document.getElementById("editor-map"),l=t?t.offsetWidth:800,i=t?t.offsetHeight:600,a=o.getSouthWest(),u=o.getNorthEast(),c=Math.abs(u.lat-a.lat),p=Math.abs(u.lng-a.lng);console.log("è¾¹ç•ŒèŒƒå›´:",{latDiff:c.toFixed(6),lngDiff:p.toFixed(6),containerSize:`${l}x${i}`});let d,m,y;c<.1&&p<.1?(d=[80,80],m=16,y=10,console.log("å°èŒƒå›´è¾¹ç•Œï¼Œä½¿ç”¨å¤§è¾¹è·å’Œé«˜ç¼©æ”¾")):c<.5&&p<.5?(d=[60,60],m=14,y=8,console.log("ä¸­ç­‰èŒƒå›´è¾¹ç•Œï¼Œä½¿ç”¨é€‚ä¸­è¾¹è·å’Œç¼©æ”¾")):c<2&&p<2?(d=[40,40],m=12,y=6,console.log("å¤§èŒƒå›´è¾¹ç•Œï¼Œä½¿ç”¨å°è¾¹è·å’Œé™åˆ¶ç¼©æ”¾")):(d=[20,20],m=10,y=5,console.log("è¶…å¤§èŒƒå›´è¾¹ç•Œï¼Œä½¿ç”¨æœ€å°è¾¹è·å’Œä¸¥æ ¼é™åˆ¶ç¼©æ”¾"));const D=nt(o,l,i,d);console.log("è®¡ç®—çš„æœ€ä½³ç¼©æ”¾çº§åˆ«:",D),s.value.fitBounds(o,{padding:d,maxZoom:Math.min(m,D),minZoom:y,animate:!0,duration:.8}),st(`âœ… å·²æ˜¾ç¤º${e}å…¨å›¾è§†å›¾ (ç¼©æ”¾: ${Math.min(m,D)})`),setTimeout(()=>{const j=s.value.getCenter(),C=s.value.getZoom();Te(j,C)},1e3)},nt=(o,e,t,l)=>{if(!o||!e||!t)return 10;const i=o.getSouthWest(),a=o.getNorthEast(),u=Math.abs(a.lat-i.lat),c=Math.abs(a.lng-i.lng),p=e-l[1]*2,d=t-l[0]*2,m=d/u,y=p/c,D=Math.min(m,y),j=111e3/D,C=Math.log2(156543.03392/j),x=Math.max(5,Math.min(18,Math.round(C)));return console.log("ç¼©æ”¾è®¡ç®—è¯¦æƒ…:",{latDiff:u.toFixed(6),lngDiff:c.toFixed(6),availableSize:`${p}x${d}`,pixelsPerDegree:D.toFixed(2),metersPerPixel:j.toFixed(2),calculatedZoom:C.toFixed(2),finalZoom:x}),x},xo=()=>{if(s.value){console.log("ä½¿ç”¨é»˜è®¤åŒ—äº¬å¸‚è§†å›¾èŒƒå›´");const o=E.latLngBounds([39.4,115.7],[40.4,117.4]);console.log("é»˜è®¤è¾¹ç•ŒèŒƒå›´:",o),lo(o,"åŒ—äº¬å¸‚é»˜è®¤")}},lt=()=>{console.log("ç”¨æˆ·å¼ºåˆ¶å…³é—­åŠ è½½çŠ¶æ€å¹¶æ˜¾ç¤ºåŸºæœ¬åœ°å›¾"),re.value=!1,ye.value=0,Re()},te=b(null),Lo=()=>{console.log("å¼€å§‹é¢„è®¡ç®—åœ°å›¾å®Œæ•´è¾¹ç•Œ");const o=[];if(Object.keys(P).forEach(e=>{const t=P[e];if(t&&t.getBounds)try{const l=t.getBounds();l&&l.isValid&&l.isValid()&&(console.log(`${e}å›¾å±‚è¾¹ç•Œ:`,l),o.push(l))}catch(l){console.log(`é¢„è®¡ç®—${e}å›¾å±‚è¾¹ç•Œå¤±è´¥:`,l)}}),o.length>0){let e=o[0];for(let t=1;t<o.length;t++)e=e.extend(o[t]);if(e&&e.isValid&&e.isValid()){const t=e.getSouthWest(),l=e.getNorthEast(),i=Math.abs(l.lat-t.lat),a=Math.abs(l.lng-t.lng);if(i>10||a>10)console.log("è¾¹ç•Œè¿‡å¤§ï¼Œä½¿ç”¨åŒ—äº¬å¸‚èŒƒå›´"),te.value=E.latLngBounds([39.4,115.7],[40.4,117.4]);else if(i<.01||a<.01){console.log("è¾¹ç•Œè¿‡å°ï¼Œæ‰©å±•èŒƒå›´");const u=e.getCenter(),c=E.latLngBounds([u.lat-.1,u.lng-.1],[u.lat+.1,u.lng+.1]);te.value=c}else te.value=e;console.log("é¢„è®¡ç®—å®Œæˆï¼Œæœ€ç»ˆè¾¹ç•Œ:",te.value),console.log("è¾¹ç•ŒèŒƒå›´:",{latDiff:i.toFixed(6),lngDiff:a.toFixed(6)})}else console.log("åˆå¹¶åçš„è¾¹ç•Œæ— æ•ˆï¼Œä½¿ç”¨é»˜è®¤è¾¹ç•Œ"),te.value=E.latLngBounds([39.4,115.7],[40.4,117.4])}else console.log("æ²¡æœ‰æœ‰æ•ˆçš„è¾¹ç•Œï¼Œä½¿ç”¨é»˜è®¤è¾¹ç•Œ"),te.value=E.latLngBounds([39.4,115.7],[40.4,117.4])},st=o=>{const e=document.createElement("div");e.className="full-extent-message",e.textContent=o;const t=document.getElementById("editor-map");t&&(t.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},2e3))},at=()=>{if(vo.value&&ee.value>0){ee.value--;const o=ve.value[ee.value];s.value&&o&&s.value.setView(o.center,o.zoom,{animate:!0}),so()}},it=()=>{if(go.value&&ee.value<ve.value.length-1){ee.value++;const o=ve.value[ee.value];s.value&&o&&s.value.setView(o.center,o.zoom,{animate:!0}),so()}},so=()=>{vo.value=ee.value>0,go.value=ee.value<ve.value.length-1},Te=(o,e)=>{ve.value=ve.value.slice(0,ee.value+1),ve.value.push({center:o,zoom:e}),ee.value=ve.value.length-1,so()},rt=()=>{Io.value.click()},ut=o=>{const e=o.target.files[0];e&&(mo.value=e,po.value=!0)},ko=o=>{console.log("Toggle MXD layer:",o.name,o.visible)},ct=o=>({point:{backgroundColor:"#ff7800"},line:{backgroundColor:"#0066ff"},polygon:{backgroundColor:"#00ff00"}})[o.type]||{backgroundColor:"#999"},Ie=o=>{const e=document.querySelector(`input[data-layer="${o}"]`);e&&e.click()},Ne=o=>{const e=P[o];if(e&&F[o]){const t=dt(o);e.setStyle(t)}},dt=o=>({districts:{fillColor:M.districts,weight:2.5,opacity:.8,color:M.districts,fillOpacity:.5,dashArray:"5, 8"},waterLines:{color:M.waterLines,weight:2.5,opacity:.9},waterAreas:{fillColor:M.waterAreas,weight:1.5,opacity:.9,color:M.waterAreas,fillOpacity:.7},reservoirs:{fillColor:M.reservoirs,weight:1.5,opacity:.9,color:M.reservoirs,fillOpacity:.8},settlements:{radius:6,fillColor:M.settlements,color:"#ffffff",weight:1.5,opacity:1,fillOpacity:.9},reservoirPoints:{radius:7,fillColor:M.reservoirPoints,color:"#fff",weight:2,opacity:1,fillOpacity:.95}})[o]||{},vt=()=>{H(),console.log("æ¿€æ´»æŸ¥è¯¢æ¨¡å¼");const o=document.getElementById("editor-map");o&&(o.style.cursor="default",console.log("å·²è®¾ç½®æŸ¥è¯¢æ¨¡å¼é¼ æ ‡æ ·å¼ä¸ºdefault")),h("ğŸ” è¯·åœ¨åœ°å›¾ä¸Šç‚¹å‡»è¦ç´ è¿›è¡ŒæŸ¥è¯¢","info")},gt=()=>{H(),console.log("æ¿€æ´»æ¸²æŸ“æ¨¡å¼");const o=document.getElementById("editor-map");o&&(o.style.cursor="default",console.log("å·²è®¾ç½®æ¸²æŸ“æ¨¡å¼é¼ æ ‡æ ·å¼ä¸ºdefault")),h("ğŸ¨ è¯·åœ¨åœ°å›¾ä¸Šç‚¹å‡»è¦ç´ è¿›è¡Œæ¸²æŸ“","info")},pt=()=>{H(),r.isActive=!0,console.log("æ¿€æ´»æ ‡æ³¨æ¨¡å¼"),r.availableFields.length===0&&eo(),oo();const o=document.getElementById("editor-map");o&&(o.style.cursor="crosshair",console.log("å·²è®¾ç½®æ ‡æ³¨æ¨¡å¼é¼ æ ‡æ ·å¼ä¸ºcrosshair")),h("ğŸ“ è¯·åœ¨åœ°å›¾ä¸Šç‚¹å‡»ä½ç½®è¿›è¡Œæ ‡æ³¨ï¼Œæˆ–ä½¿ç”¨æ§åˆ¶é¢æ¿ç®¡ç†å­—æ®µæ ‡æ³¨","info")},r=me({isActive:!1,annotations:[],autoAnnotations:[],manualAnnotations:[],currentStyle:{fontSize:16,fontFamily:"Arial, sans-serif",color:"#000000",backgroundColor:"transparent",borderColor:"#000000",borderWidth:0,padding:0,borderRadius:0,shadow:!1},showAutoLabels:!0,showManualLabels:!0,minZoom:1,maxZoom:20,overlapAvoidance:!0,selectedLayer:"monitoringPoints",selectedField:"å¹´å¹³å‡æ°¨æ°®",availableFields:[{value:"å¹´å¹³å‡æ°¨æ°®",label:"å¹´å¹³å‡æ°¨æ°®"},{value:"å¹´å¹³å‡é«˜çŒ›é…¸ç›",label:"å¹´å¹³å‡é«˜çŒ›é…¸ç›"},{value:"å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡",label:"å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡"},{value:"å¹´å¹³å‡æµé‡",label:"å¹´å¹³å‡æµé‡"},{value:"å¹´å¹³å‡æ°´æ·±",label:"å¹´å¹³å‡æ°´æ·±"},{value:"å¹´å¹³å‡æ€»æ°®",label:"å¹´å¹³å‡æ€»æ°®"},{value:"å¹´å¹³å‡æ€»ç£·",label:"å¹´å¹³å‡æ€»ç£·"}]}),mt=o=>{if(!s.value){console.error("åœ°å›¾æœªåˆå§‹åŒ–");return}try{console.log("å¼€å§‹æ·»åŠ æ ‡æ³¨ï¼Œä½ç½®:",o);const e=ft(o);r.manualAnnotations.push(e),r.annotations.push(e),h("âœ… æ‰‹åŠ¨æ ‡æ³¨æ·»åŠ æˆåŠŸ","success"),je()}catch(e){console.error("æ·»åŠ æ ‡æ³¨å¤±è´¥:",e),h("âŒ æ·»åŠ æ ‡æ³¨å¤±è´¥","warning")}},ft=o=>{const e={id:"manual_"+Date.now(),type:"manual",latlng:o,text:"æ–°æ ‡æ³¨",style:{...r.currentStyle},isEditing:!1,isVisible:!0,layer:null};return e.layer=ao(e),e},yt=(o,e)=>{const t=o.properties,l=e.getLatLng?e.getLatLng():e.getBounds().getCenter();let i="";const a=r.selectedField;if(a&&t[a]!==void 0&&t[a]!==null){const u=t[a];if(typeof u=="number"||!isNaN(parseFloat(u))){const p=ht(a);i=`${u}${p?` ${p}`:""}`}else i=u.toString();return{id:"auto_"+Date.now()+"_"+Math.random(),type:"auto",latlng:l,text:i,style:{...r.currentStyle},isVisible:!0,layer:null,feature:o,sourceLayer:e}}return null},ht=o=>({å¹´å¹³å‡æ°¨æ°®:"mg/L",å¹´å¹³å‡é«˜çŒ›é…¸ç›:"mg/L",å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡:"mg/L",å¹´å¹³å‡æµé‡:"mÂ³/s",å¹´å¹³å‡æ°´æ·±:"m",å¹´å¹³å‡æ€»æ°®:"mg/L",å¹´å¹³å‡æ€»ç£·:"mg/L",å¤šå¹´å¹³å‡åº“æ°´ä½:"m",å¤šå¹´å¹³å‡è“„æ°´é‡:"ä¸‡mÂ³",å¤šå¹´æ—¥å¹³å‡å…¥åº“æµé‡:"mÂ³/s",å¤šå¹´æ—¥å¹³å‡å‡ºåº“æµé‡:"mÂ³/s",æ€»åº“å®¹:"ä¸‡mÂ³",æ±›é™æ°´ä½:"m"})[o]||"",bt=o=>{const e=document.querySelector(`[data-annotation-id="${o}"]`);if(!e)return;const t=e.closest(".leaflet-popup");if(!t)return;let l=!1,i,a,u,c;t.style.cursor="move",t.style.userSelect="none";const p=x=>{if(!x.target.closest(".annotation-popup-header"))return;l=!0,i=x.clientX,a=x.clientY;const V=t.getBoundingClientRect();u=V.left,c=V.top,t.style.transition="none",t.style.zIndex="10000",x.preventDefault(),x.stopPropagation()},d=x=>{if(!l)return;const V=x.clientX-i,ie=x.clientY-a,be=u+V,R=c+ie,pe=window.innerWidth-t.offsetWidth,yo=window.innerHeight-t.offsetHeight,ho=Math.max(0,Math.min(be,pe)),bo=Math.max(0,Math.min(R,yo));t.style.left=ho+"px",t.style.top=bo+"px",x.preventDefault(),x.stopPropagation()},m=x=>{l&&(l=!1,t.style.transition="all 0.3s ease",t.style.zIndex="1000",x.preventDefault(),x.stopPropagation())},y=x=>{if(!x.target.closest(".annotation-popup-header"))return;l=!0;const V=x.touches[0];i=V.clientX,a=V.clientY;const ie=t.getBoundingClientRect();u=ie.left,c=ie.top,t.style.transition="none",t.style.zIndex="10000",x.preventDefault(),x.stopPropagation()},D=x=>{if(!l)return;const V=x.touches[0],ie=V.clientX-i,be=V.clientY-a,R=u+ie,pe=c+be,yo=window.innerWidth-t.offsetWidth,ho=window.innerHeight-t.offsetHeight,bo=Math.max(0,Math.min(R,yo)),Mn=Math.max(0,Math.min(pe,ho));t.style.left=bo+"px",t.style.top=Mn+"px",x.preventDefault(),x.stopPropagation()},j=x=>{l&&(l=!1,t.style.transition="all 0.3s ease",t.style.zIndex="1000",x.preventDefault(),x.stopPropagation())};t.addEventListener("mousedown",p),document.addEventListener("mousemove",d),document.addEventListener("mouseup",m),t.addEventListener("touchstart",y,{passive:!1}),document.addEventListener("touchmove",D,{passive:!1}),document.addEventListener("touchend",j,{passive:!1});const C=()=>{t.removeEventListener("mousedown",p),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",m),t.removeEventListener("touchstart",y),document.removeEventListener("touchmove",D),document.removeEventListener("touchend",j)};t._dragCleanup=C},wt=o=>{const e=r.annotations.find(t=>t.id===o);if(e&&e.layer){const t=document.querySelector(`[data-annotation-id="${o}"]`);if(t){const l=t.closest(".leaflet-popup");l&&l._dragCleanup&&(l._dragCleanup(),delete l._dragCleanup)}e.layer.closePopup()}},Ue=b(!1),Q=me({x:0,y:0,left:0,top:0}),_e=b(null),We=b(!1),J=me({x:0,y:0,left:0,top:0}),Ye=b(!1),K=me({x:0,y:0,left:0,top:0}),Mo=o=>{if(o.target.closest(".annotation-panel-close"))return;Ue.value=!0,o.type==="mousedown"?(Q.x=o.clientX,Q.y=o.clientY):o.type==="touchstart"&&(Q.x=o.touches[0].clientX,Q.y=o.touches[0].clientY);const e=Me.value;if(e){e.style.transform="none",e.style.transition="none",e.style.zIndex="10000";const t=e.getBoundingClientRect();Q.left=t.left,Q.top=t.top,e.style.left=t.left+"px",e.style.top=t.top+"px",e.classList.add("dragging")}o.type==="mousedown"?(document.addEventListener("mousemove",He),document.addEventListener("mouseup",Xe)):o.type==="touchstart"&&(document.addEventListener("touchmove",He,{passive:!1}),document.addEventListener("touchend",Xe)),o.preventDefault(),o.stopPropagation()},He=o=>{if(!Ue.value)return;const e=Me.value;if(!e)return;let t,l;o.type==="mousemove"?(t=o.clientX,l=o.clientY):o.type==="touchmove"&&(t=o.touches[0].clientX,l=o.touches[0].clientY);const i=t-Q.x,a=l-Q.y,u=Q.left+i,c=Q.top+a,p=window.innerWidth-e.offsetWidth,d=window.innerHeight-e.offsetHeight,m=Math.max(0,Math.min(u,p)),y=Math.max(0,Math.min(c,d));e.style.left=m+"px",e.style.top=y+"px",o.preventDefault(),o.stopPropagation()},Xe=o=>{if(!Ue.value)return;Ue.value=!1;const e=Me.value;e&&(e.style.transition="all 0.3s ease",e.style.zIndex="2000",e.classList.remove("dragging")),document.removeEventListener("mousemove",He),document.removeEventListener("mouseup",Xe),document.removeEventListener("touchmove",He),document.removeEventListener("touchend",Xe),o.preventDefault(),o.stopPropagation()},xt=()=>{const o=Me.value;o&&(o.classList.remove("dragging"),o.style.left="",o.style.top="",o.style.transform="translate(-50%, -50%)",o.style.transition="all 0.3s ease",o.style.zIndex="2000")},Co=o=>{if(o.target.closest(".search-close"))return;Ye.value=!0,o.type==="mousedown"?(K.x=o.clientX,K.y=o.clientY):o.type==="touchstart"&&(K.x=o.touches[0].clientX,K.y=o.touches[0].clientY);const e=Ce.value;if(e){e.style.transform="none",e.style.transition="none",e.style.zIndex="10000";const t=e.getBoundingClientRect();K.left=t.left,K.top=t.top,e.style.left=t.left+"px",e.style.top=t.top+"px",e.classList.add("dragging")}o.type==="mousedown"?(document.addEventListener("mousemove",$e),document.addEventListener("mouseup",Se)):o.type==="touchstart"&&(document.addEventListener("touchmove",$e,{passive:!1}),document.addEventListener("touchend",Se)),o.preventDefault(),o.stopPropagation()},$e=o=>{if(!Ye.value)return;const e=Ce.value;if(!e)return;let t,l;o.type==="mousemove"?(t=o.clientX,l=o.clientY):o.type==="touchmove"&&(t=o.touches[0].clientX,l=o.touches[0].clientY);const i=t-K.x,a=l-K.y,u=K.left+i,c=K.top+a,p=window.innerWidth-e.offsetWidth,d=window.innerHeight-e.offsetHeight,m=Math.max(0,Math.min(u,p)),y=Math.max(0,Math.min(c,d));e.style.left=m+"px",e.style.top=y+"px",o.preventDefault(),o.stopPropagation()},Se=o=>{if(!Ye.value)return;Ye.value=!1;const e=Ce.value;e&&(e.style.transition="all 0.3s ease",e.style.zIndex="2001",e.classList.remove("dragging")),document.removeEventListener("mousemove",$e),document.removeEventListener("mouseup",Se),document.removeEventListener("touchmove",$e),document.removeEventListener("touchend",Se),o.preventDefault(),o.stopPropagation()},Lt=()=>{const o=Ce.value;o&&(o.classList.remove("dragging"),o.style.left="",o.style.top="",o.style.transform="translateX(-50%)",o.style.transition="all 0.3s ease",o.style.zIndex="2001")},Eo=o=>{if(o.target.closest(".render-modal-close")||o.target.closest(".render-modal-reset"))return;We.value=!0,o.type==="mousedown"?(J.x=o.clientX,J.y=o.clientY):o.type==="touchstart"&&(J.x=o.touches[0].clientX,J.y=o.touches[0].clientY);const e=_e.value;if(e){e.style.transform="none",e.style.transition="none",e.style.zIndex="10000";const t=e.getBoundingClientRect();J.left=t.left,J.top=t.top,e.style.left=t.left+"px",e.style.top=t.top+"px",e.classList.add("dragging")}o.type==="mousedown"?(document.addEventListener("mousemove",qe),document.addEventListener("mouseup",Ge)):o.type==="touchstart"&&(document.addEventListener("touchmove",qe,{passive:!1}),document.addEventListener("touchend",Ge)),o.preventDefault(),o.stopPropagation()},qe=o=>{if(!We.value)return;const e=_e.value;if(!e)return;let t,l;o.type==="mousemove"?(t=o.clientX,l=o.clientY):o.type==="touchmove"&&(t=o.touches[0].clientX,l=o.touches[0].clientY);const i=t-J.x,a=l-J.y,u=J.left+i,c=J.top+a,p=window.innerWidth-e.offsetWidth,d=window.innerHeight-e.offsetHeight,m=Math.max(0,Math.min(u,p)),y=Math.max(0,Math.min(c,d));e.style.left=m+"px",e.style.top=y+"px",o.preventDefault(),o.stopPropagation()},Ge=o=>{if(!We.value)return;We.value=!1;const e=_e.value;e&&(e.style.transition="all 0.3s ease",e.style.zIndex="2002",e.classList.remove("dragging")),document.removeEventListener("mousemove",qe),document.removeEventListener("mouseup",Ge),document.removeEventListener("touchmove",qe),document.removeEventListener("touchend",Ge),o.preventDefault(),o.stopPropagation()},kt=()=>{const o=_e.value;o&&(o.classList.remove("dragging"),o.style.left="",o.style.top="",o.style.transform="translateX(-50%)",o.style.transition="all 0.3s ease",o.style.zIndex="2002")},ao=o=>{console.log("åˆ›å»ºæ ‡æ³¨å›¾å±‚:",o.text,"ä½ç½®:",o.latlng);const{fontSize:e,fontFamily:t,color:l,backgroundColor:i,borderColor:a,borderWidth:u,padding:c,borderRadius:p,shadow:d}=o.style,m=document.createElement("div");m.style.fontSize=e+"px",m.style.fontFamily=t,m.style.visibility="hidden",m.style.position="absolute",m.style.whiteSpace="nowrap",m.textContent=o.text,document.body.appendChild(m);const y=m.offsetWidth;document.body.removeChild(m);const D=E.divIcon({className:"annotation-label",html:`
      <div class="annotation-text" 
           style="
             font-size: ${e}px;
             font-family: ${t};
             color: ${l};
             background-color: transparent;
             border: none;
             padding: 0;
             border-radius: 0;
             box-shadow: none;
             white-space: nowrap;
             cursor: pointer;
             user-select: none;
             font-weight: 700;
             letter-spacing: 0.3px;
             text-shadow: 
               2px 2px 0px rgba(255,255,255,1),
               1px 1px 0px rgba(255,255,255,1),
               -1px -1px 0px rgba(255,255,255,1),
               -2px -2px 0px rgba(255,255,255,1);
             line-height: 1.2;
             position: relative;
             z-index: 1000;
             display: block;
             width: ${y}px;
             height: ${e}px;
             text-align: center;
           "
           data-annotation-id="${o.id}"
      >
        ${o.text}
      </div>
    `,iconSize:[y,e],iconAnchor:[y/2,e/2],popupAnchor:[0,-e/2]}),j=E.marker(o.latlng,{icon:D,interactive:!0,keyboard:!1,title:o.text}).addTo(s.value);return console.log("æ ‡æ³¨å›¾å±‚å·²æ·»åŠ åˆ°åœ°å›¾:",j),j.on("click",()=>Mt(o)),j.on("dblclick",()=>Ct(o)),j},Mt=o=>{o.type==="manual"?Et(o):At(o)},Ct=o=>{o.type==="manual"&&Ao(o)},Et=o=>{const e=`
    <div class="annotation-popup" data-annotation-id="${o.id}">
      <div class="annotation-popup-header" data-annotation-id="${o.id}">
        <h4>æ ‡æ³¨ä¿¡æ¯</h4>
        <span class="annotation-popup-close" onclick="window.closeAnnotationPopup('${o.id}')">Ã—</span>
      </div>
      <div class="annotation-popup-content">
        <p><strong>ç±»å‹:</strong> ${o.type==="manual"?"æ‰‹åŠ¨æ ‡æ³¨":"è‡ªåŠ¨æ ‡æ³¨"}</p>
        <p><strong>æ–‡æœ¬:</strong> ${o.text}</p>
        <p><strong>ä½ç½®:</strong> ${o.latlng.lat.toFixed(6)}, ${o.latlng.lng.toFixed(6)}</p>
        <p><strong>æ—¶é—´:</strong> ${new Date().toLocaleString()}</p>
        ${o.type==="manual"?`
          <div class="annotation-actions">
            <button onclick="window.editAnnotation('${o.id}')">ç¼–è¾‘</button>
            <button onclick="window.deleteAnnotation('${o.id}')">åˆ é™¤</button>
          </div>
        `:""}
      </div>
    </div>
  `;o.layer.bindPopup(e,{closeButton:!1,className:"draggable-annotation-popup",maxWidth:300,autoPan:!1}).openPopup(),setTimeout(()=>{bt(o.id)},100)},At=o=>{o.sourceLayer&&(o.originalStyle||(o.originalStyle=o.sourceLayer.options),o.sourceLayer.setStyle({color:"#ff0000",fillColor:"#ffcccc",weight:3,fillOpacity:.8}),setTimeout(()=>{o.sourceLayer&&o.originalStyle&&o.sourceLayer.setStyle(o.originalStyle)},3e3))},Ao=o=>{o.isEditing=!0;const e=document.createElement("input");e.type="text",e.value=o.text,e.className="annotation-edit-input",e.style.cssText=`
    position: absolute;
    z-index: 10000;
    font-size: ${o.style.fontSize}px;
    font-family: ${o.style.fontFamily};
    color: ${o.style.color};
    background-color: ${o.style.backgroundColor};
    border: 2px solid #1890ff;
    border-radius: 4px;
    padding: 4px;
    outline: none;
  `;const l=document.getElementById("editor-map").getBoundingClientRect(),i=o.latlng,a=s.value.latLngToLayerPoint(i);e.style.left=l.left+a.x-50+"px",e.style.top=l.top+a.y-15+"px",document.body.appendChild(e),e.focus(),e.addEventListener("blur",()=>{$o(o,e.value)}),e.addEventListener("keypress",u=>{u.key==="Enter"&&$o(o,e.value)})},$o=(o,e)=>{o.text=e,o.isEditing=!1;const t=document.querySelector(".annotation-edit-input");t&&t.remove(),je(),h("âœ… æ ‡æ³¨ç¼–è¾‘å®Œæˆ","success")},$t=o=>{const e=r.annotations.findIndex(t=>t.id===o);if(e>-1){const t=r.annotations[e];if(t.layer&&s.value.removeLayer(t.layer),r.annotations.splice(e,1),t.type==="manual"){const l=r.manualAnnotations.findIndex(i=>i.id===o);l>-1&&r.manualAnnotations.splice(l,1)}else{const l=r.autoAnnotations.findIndex(i=>i.id===o);l>-1&&r.autoAnnotations.splice(l,1)}h("âœ… æ ‡æ³¨åˆ é™¤æˆåŠŸ","success")}},St=()=>{r.showAutoLabels&&Vo()},je=()=>{console.log("å¼€å§‹æ›´æ–°æ ‡æ³¨æ˜¾ç¤ºï¼Œå½“å‰æ ‡æ³¨æ•°é‡:",r.annotations.length),r.annotations.forEach(o=>{o.layer&&(s.value.removeLayer(o.layer),o.layer=null)}),r.annotations.forEach(o=>{o.isVisible&&(console.log("åˆ›å»ºæ ‡æ³¨:",o.text,"ä½ç½®:",o.latlng),o.layer=ao(o),io(o))}),console.log("æ ‡æ³¨æ˜¾ç¤ºæ›´æ–°å®Œæˆï¼Œå½“å‰å¯è§æ ‡æ³¨æ•°é‡:",r.annotations.filter(o=>o.isVisible&&o.layer).length),r.overlapAvoidance&&Pt()},io=o=>{if(o.layer&&o.layer.getElement){const e=o.layer.getElement();if(e){e.style.imageRendering="crisp-edges",e.style.imageRendering="-webkit-optimize-contrast",e.style.imageRendering="optimize-contrast",e.style.transform="translateZ(0)",e.style.backfaceVisibility="hidden";const t=e.querySelector(".annotation-text");t&&(t.style.textRendering="optimizeLegibility",t.style.webkitFontSmoothing="antialiased",t.style.mozOsxFontSmoothing="grayscale")}}},So=()=>{console.log("å¼€å§‹é‡æ–°å®šä½æ ‡æ³¨ï¼Œå½“å‰æ ‡æ³¨æ•°é‡:",r.annotations.length),r.annotations.forEach(o=>{if(o.isVisible&&o.layer&&o.latlng)try{o.layer.setLatLng(o.latlng),console.log(`é‡æ–°å®šä½æ ‡æ³¨: ${o.text} åˆ°ä½ç½®:`,o.latlng)}catch(e){console.error(`é‡æ–°å®šä½æ ‡æ³¨å¤±è´¥: ${o.text}`,e)}}),console.log("æ ‡æ³¨é‡æ–°å®šä½å®Œæˆ")},Po=()=>{console.log("çª—å£å¤§å°å˜åŒ–ï¼Œé‡æ–°è°ƒæ•´åœ°å›¾å’Œæ ‡æ³¨"),setTimeout(()=>{s.value&&(s.value.invalidateSize(),So(),console.log("åœ°å›¾å’Œæ ‡æ³¨è°ƒæ•´å®Œæˆ"))},200)},Pt=()=>{const o=r.annotations.filter(t=>t.isVisible),e=5;for(let t=0;t<o.length;t++)for(let l=t+1;l<o.length;l++){const i=o[t],a=o[l];Ft(i,a,e)&&Dt(i,a)}},Ft=(o,e,t)=>{const l=s.value.latLngToLayerPoint(o.latlng),i=s.value.latLngToLayerPoint(e.latlng);return Math.sqrt(Math.pow(l.x-i.x,2)+Math.pow(l.y-i.y,2))<t},Dt=(o,e)=>{const l=e.latlng.lng-o.latlng.lng,i=e.latlng.lat-o.latlng.lat;e.latlng.lng+=l>0?20/1e5:-20/1e5,e.latlng.lat+=i>0?20/1e5:-20/1e5,e.layer&&e.layer.setLatLng(e.latlng)},ro=()=>{if(!s.value)return;const o=s.value.getZoom(),e=o>=r.minZoom&&o<=r.maxZoom;console.log(`ç¼©æ”¾çº§åˆ«æ£€æŸ¥: å½“å‰=${o}, æœ€å°=${r.minZoom}, æœ€å¤§=${r.maxZoom}, åº”è¯¥æ˜¾ç¤º=${e}`),r.annotations.forEach(t=>{t.isVisible=e,t.layer&&(e?(t.layer.addTo(s.value),io(t)):(console.log(`éšè—æ ‡æ³¨: ${t.text} (ç¼©æ”¾çº§åˆ«: ${o})`),s.value.removeLayer(t.layer)))})},ue=()=>{r.annotations.forEach(o=>{o.style={...r.currentStyle}}),je()},zt=()=>{confirm("ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ ‡æ³¨å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚")&&(r.annotations.forEach(o=>{const e=document.querySelector(`[data-annotation-id="${o.id}"]`);if(e){const t=e.closest(".leaflet-popup");t&&t._dragCleanup&&(t._dragCleanup(),delete t._dragCleanup)}}),r.annotations.forEach(o=>{o.layer&&s.value.removeLayer(o.layer)}),r.annotations=[],r.autoAnnotations=[],r.manualAnnotations=[],r.selectedLayer="monitoringPoints",r.selectedField="å¹´å¹³å‡æ°¨æ°®",eo(),h("âœ… æ‰€æœ‰æ ‡æ³¨å·²æ¸…é™¤","success"))};window.editAnnotation=o=>{const e=r.annotations.find(t=>t.id===o);e&&Ao(e)},window.deleteAnnotation=o=>{$t(o)},window.closeAnnotationPopup=o=>{wt(o)};const S=b(""),A=me({query:{isActive:!1,panels:["query"]},render:{isActive:!1,panels:["render"]},identifyFeature:{isActive:!1,panels:["identifyFeature"]},annotation:{isActive:!1,panels:["annotation"]},selectFeature:{isActive:!1,panels:["selectFeature"]},pan:{isActive:!1,panels:["pan"]},zoomIn:{isActive:!1,panels:["zoomIn"]},zoomOut:{isActive:!1,panels:["zoomOut"]},rectangleZoom:{isActive:!1,panels:["rectangleZoom"]},rectangleZoomOut:{isActive:!1,panels:["rectangleZoomOut"]}}),B=o=>{const e=A[o];if(!e){console.error(`æœªçŸ¥å·¥å…·: ${o}`);return}e.isActive?(console.log(`å…³é—­å·¥å…·: ${o}`),Fo(o)):(console.log(`æ¿€æ´»å·¥å…·: ${o}`),Tt(o))},Tt=o=>{switch(Object.keys(A).forEach(e=>{e!==o&&A[e].isActive&&Fo(e)}),A[o].isActive=!0,S.value=o,o){case"query":vt();break;case"render":gt();break;case"identifyFeature":tt();break;case"annotation":pt();break;case"selectFeature":ot();break;case"pan":Jo();break;case"zoomIn":qo(),ce.value=!0;break;case"zoomOut":Go(),ne.value=!0;break;case"rectangleZoom":jt(),ce.value=!0;break;case"rectangleZoomOut":Qo(),ne.value=!0;break;default:console.warn(`æœªå¤„ç†çš„å·¥å…·ç±»å‹: ${o}`)}},Fo=o=>{const e=A[o];if(e){switch(e.isActive=!1,S.value===o&&(S.value=""),o){case"query":break;case"render":break;case"identifyFeature":break;case"annotation":r.isActive=!1;break;case"selectFeature":break;case"pan":Ae.value=!1;break;case"zoomIn":case"zoomOut":case"rectangleZoom":case"rectangleZoomOut":ce.value=!1,ne.value=!1;break}H(),console.log(`å·¥å…·å·²å…³é—­: ${o}`)}},ce=b(!1),ne=b(!1),N=b(""),T=b(!1),Y=b(null),It=()=>{ce.value=!1},Nt=()=>{console.log("å…³é—­ç¼©å°èœå•"),ne.value=!1};Oo(()=>{document.addEventListener("click",o=>{const e=document.querySelector(".zoom-dropdown-container:not(.zoom-out-container)");e&&!e.contains(o.target)&&It();const t=document.querySelector(".zoom-dropdown-container.zoom-out-container");t&&!t.contains(o.target)&&Nt()})});const Do={rectangleZoom:o=>{if(console.log("æ‰§è¡Œæ‹‰æ¡†æ”¾å¤§ï¼Œgeometry:",o),console.log("åœ°å›¾å¯¹è±¡:",s.value),console.log("å‡ ä½•å¯¹è±¡ç±»å‹:",o?o.constructor.name:"null"),!s.value){console.error("åœ°å›¾æœªåˆå§‹åŒ–"),h("âŒ åœ°å›¾æœªåˆå§‹åŒ–","warning");return}if(!o){console.error("å‡ ä½•å¯¹è±¡ä¸ºç©º"),h("âŒ ç»˜åˆ¶çš„åŒºåŸŸæ— æ•ˆï¼Œè¯·é‡æ–°ç»˜åˆ¶","warning");return}try{if(typeof o.getBounds!="function"){console.error("å‡ ä½•å¯¹è±¡æ²¡æœ‰getBoundsæ–¹æ³•:",o),h("âŒ ç»˜åˆ¶çš„åŒºåŸŸç±»å‹ä¸æ”¯æŒï¼Œè¯·é‡æ–°ç»˜åˆ¶","warning");return}const e=o.getBounds();if(console.log("è·å–åˆ°çš„è¾¹ç•Œ:",e),!e){console.error("æ— æ³•è·å–è¾¹ç•Œ"),h("âŒ æ— æ³•è·å–ç»˜åˆ¶åŒºåŸŸçš„è¾¹ç•Œï¼Œè¯·é‡æ–°ç»˜åˆ¶","warning");return}zo(e)?(console.log("è¾¹ç•ŒéªŒè¯é€šè¿‡ï¼Œæ‰§è¡Œæ”¾å¤§"),s.value.fitBounds(e,{padding:[50,50],maxZoom:Math.min(s.value.getMaxZoom(),18),animate:!0}),h("âœ… æ‹‰æ¡†æ”¾å¤§æˆåŠŸ","success"),setTimeout(()=>{const t=s.value.getCenter(),l=s.value.getZoom();Te(t,l)},300)):(console.log("è¾¹ç•ŒéªŒè¯å¤±è´¥"),h("âš ï¸ ç»˜åˆ¶çš„åŒºåŸŸæ— æ•ˆï¼Œè¯·é‡æ–°ç»˜åˆ¶","warning"))}catch(e){console.error("æ‹‰æ¡†æ”¾å¤§è¿‡ç¨‹ä¸­å‡ºé”™:",e),h("âŒ æ”¾å¤§å¤±è´¥ï¼Œè¯·é‡æ–°ç»˜åˆ¶","warning")}},rectangleZoomOut:o=>{if(console.log("æ‰§è¡Œæ‹‰æ¡†ç¼©å°ï¼Œgeometry:",o),console.log("åœ°å›¾å¯¹è±¡:",s.value),console.log("å‡ ä½•å¯¹è±¡ç±»å‹:",o?o.constructor.name:"null"),!s.value){console.error("åœ°å›¾æœªåˆå§‹åŒ–"),h("âŒ åœ°å›¾æœªåˆå§‹åŒ–","warning");return}if(!o){console.error("å‡ ä½•å¯¹è±¡ä¸ºç©º"),h("âŒ ç»˜åˆ¶çš„åŒºåŸŸæ— æ•ˆï¼Œè¯·é‡æ–°ç»˜åˆ¶","warning");return}try{if(typeof o.getBounds!="function"){console.error("å‡ ä½•å¯¹è±¡æ²¡æœ‰getBoundsæ–¹æ³•:",o),h("âŒ ç»˜åˆ¶çš„åŒºåŸŸç±»å‹ä¸æ”¯æŒï¼Œè¯·é‡æ–°ç»˜åˆ¶","warning");return}const e=o.getBounds();if(console.log("è·å–åˆ°çš„è¾¹ç•Œ:",e),!e){console.error("æ— æ³•è·å–è¾¹ç•Œ"),h("âŒ æ— æ³•è·å–ç»˜åˆ¶åŒºåŸŸçš„è¾¹ç•Œï¼Œè¯·é‡æ–°ç»˜åˆ¶","warning");return}if(zo(e)){console.log("è¾¹ç•ŒéªŒè¯é€šè¿‡ï¼Œæ‰§è¡Œç¼©å°");const t=s.value.getCenter(),l=s.value.getZoom(),i=e.getCenter(),a=Math.max(s.value.getMinZoom(),l-1.5);s.value.setView(i,a,{animate:!0,duration:.8}),h(`âœ… æ‹‰æ¡†ç¼©å°æˆåŠŸ (ç¼©æ”¾: ${l.toFixed(1)} â†’ ${a.toFixed(1)})`,"success"),setTimeout(()=>{const u=s.value.getCenter(),c=s.value.getZoom();Te(u,c)},300)}else console.log("è¾¹ç•ŒéªŒè¯å¤±è´¥"),h("âš ï¸ ç»˜åˆ¶çš„åŒºåŸŸæ— æ•ˆï¼Œè¯·é‡æ–°ç»˜åˆ¶","warning")}catch(e){console.error("æ‹‰æ¡†ç¼©å°è¿‡ç¨‹ä¸­å‡ºé”™:",e),h("âŒ ç¼©å°å¤±è´¥ï¼Œè¯·é‡æ–°ç»˜åˆ¶","warning")}}},zo=o=>{if(!o||!s.value)return!1;try{if(!o.isValid||!o.isValid())return console.log("è¾¹ç•Œå¯¹è±¡æ— æ•ˆ"),!1;const e=o.getSouthWest(),t=o.getNorthEast();if(!e||!t)return console.log("æ— æ³•è·å–è¾¹ç•Œåæ ‡"),!1;if(isNaN(e.lat)||isNaN(e.lng)||isNaN(t.lat)||isNaN(t.lng))return console.log("è¾¹ç•Œåæ ‡åŒ…å«æ— æ•ˆå€¼"),!1;const l=Math.abs(t.lat-e.lat),i=Math.abs(t.lng-e.lng);return l<1e-4||i<1e-4?(console.log("è¾¹ç•Œå¤ªå°:",{latDiff:l,lngDiff:i}),!1):l>10||i>10?(console.log("è¾¹ç•Œå¤ªå¤§:",{latDiff:l,lngDiff:i}),!1):(console.log("è¾¹ç•ŒéªŒè¯é€šè¿‡:",{latDiff:l,lngDiff:i}),!0)}catch(e){return console.error("è¾¹ç•ŒéªŒè¯å‡ºé”™:",e),!1}},H=()=>{console.log("é‡ç½®å·¥å…·çŠ¶æ€"),(A.zoomIn.isActive||A.zoomOut.isActive||A.rectangleZoomOut.isActive)&&s.value&&(s.value.dragging.enable(),console.log("å·²æ¢å¤åœ°å›¾æ‹–æ‹½åŠŸèƒ½")),ce.value=!1,ne.value=!1;const o=document.getElementById("editor-map");if(o){A.selectFeature.isActive?o.style.cursor="pointer":A.identifyFeature.isActive?o.style.cursor="help":o.style.cursor="default",o.classList.remove("panning"),o.classList.remove("zoom-in-cursor","zoom-out-cursor"),o.querySelectorAll(".leaflet-pane, .leaflet-overlay-pane, .leaflet-tile-pane, .leaflet-marker-pane, .leaflet-tooltip-pane, .leaflet-popup-pane").forEach(a=>{a.style.cursor=""}),o.querySelectorAll("*").forEach(a=>{a.style&&!a.classList.contains("custom-toolbar")&&!a.classList.contains("control-panel")&&(a.style.cursor="")});const l=a=>{if(A.zoomIn.isActive){const u=a.target;u&&u.style&&(u.style.cursor="zoom-in")}},i=a=>{if(A.zoomOut.isActive){const u=a.target;u&&u.style&&(u.style.cursor="zoom-out")}};o.removeEventListener("mousemove",l),o.removeEventListener("mousemove",i),console.log("å·²æ¢å¤é¼ æ ‡æ ·å¼ï¼Œå·²ç§»é™¤é¼ æ ‡ç§»åŠ¨ç›‘å¬å™¨ï¼Œå·²ç§»é™¤å¹³ç§»CSSç±»")}},_t=()=>{if(s.value){console.log("=== åº”ç”¨å¹³ç§»æ€§èƒ½ä¼˜åŒ– ==="),s.value.options.inertia=!0,s.value.options.inertiaDeceleration=3e3,s.value.options.inertiaMaxSpeed=3e3,s.value.options.updateWhenZooming=!1,s.value.options.updateWhenIdle=!0,s.value.options.keepBuffer=2;const o=s.value._tileLayers;o&&Object.values(o).forEach(e=>{e.options&&(e.options.updateWhenIdle=!0,e.options.updateWhenZooming=!1,e.options.keepBuffer=2)}),Object.values(P).forEach(e=>{e&&e.setStyle&&e.setStyle({smoothFactor:1,simplifyTolerance:.5})}),console.log("å¹³ç§»æ€§èƒ½ä¼˜åŒ–å·²åº”ç”¨")}},uo=o=>{o.key==="Escape"&&T.value&&(q(),h("âŒ å·²å–æ¶ˆç»˜åˆ¶","warning")),(o.key==="f"||o.key==="F")&&(o.preventDefault(),wo()),o.key==="Delete"&&I.value.size>0&&(o.preventDefault(),to(),h("ğŸ—‘ï¸ å·²æ¸…é™¤æ‰€æœ‰è¦ç´ é€‰æ‹©","info"))},jt=()=>{if(console.log("æ¿€æ´»çŸ©å½¢æ¡†æ”¾å¤§æ¨¡å¼"),console.log("å½“å‰åœ°å›¾çŠ¶æ€:",{map:!!s.value,activeMapTool:S.value,zoomMode:N.value}),!s.value){console.error("åœ°å›¾æœªåˆå§‹åŒ–ï¼Œæ— æ³•å¯åŠ¨ç»˜åˆ¶æ¨¡å¼"),h("âŒ åœ°å›¾æœªåˆå§‹åŒ–","warning");return}H(),N.value="rectangle",ce.value=!1,ne.value=!1,console.log("å¯åŠ¨ç»˜åˆ¶æ¨¡å¼å‰çš„çŠ¶æ€:",{zoomMode:N.value}),Bo()},Vt=()=>{console.log("è®¾ç½®çŸ©å½¢ç»˜åˆ¶æ¨¡å¼"),console.log("å½“å‰æ¿€æ´»å·¥å…·:",S.value),console.log("å½“å‰ç¼©æ”¾æ¨¡å¼:",N.value);let o=null,e=null;const t=a=>{if(console.log("çŸ©å½¢ç»˜åˆ¶ - é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶è§¦å‘"),console.log("å½“å‰isDrawingçŠ¶æ€:",T.value),console.log("å½“å‰activeMapTool:",S.value),console.log("å½“å‰zoomMode:",N.value),!T.value){console.log("isDrawingä¸ºfalseï¼Œé€€å‡º");return}o=a.latlng,console.log("å¼€å§‹ç»˜åˆ¶çŸ©å½¢ï¼Œèµ·å§‹ç‚¹:",o);try{e=E.rectangle([o,o],{color:"#ff0000",weight:2,fillColor:"#ff0000",fillOpacity:.2}).addTo(Y.value),console.log("çŸ©å½¢å¯¹è±¡å·²åˆ›å»º:",e),console.log("çŸ©å½¢ç±»å‹:",e.constructor.name)}catch(u){console.error("åˆ›å»ºçŸ©å½¢å¯¹è±¡å¤±è´¥:",u),h("âŒ åˆ›å»ºç»˜åˆ¶åŒºåŸŸå¤±è´¥","warning"),q();return}},l=a=>{if(!(!T.value||!o||!e))try{const u=a.latlng;e.setBounds([o,u]),console.log("æ›´æ–°çŸ©å½¢ï¼Œå½“å‰ç‚¹:",u)}catch(u){console.error("æ›´æ–°çŸ©å½¢å¤±è´¥:",u)}},i=a=>{if(!T.value||!o||!e){console.log("ç»˜åˆ¶æ¡ä»¶ä¸æ»¡è¶³:",{isDrawing:T.value,startPoint:!!o,rectangle:!!e});return}console.log("å®ŒæˆçŸ©å½¢ç»˜åˆ¶");try{const u=e.getBounds();if(console.log("çŸ©å½¢è¾¹ç•Œ:",u),!u){console.error("æ— æ³•è·å–çŸ©å½¢è¾¹ç•Œ"),h("âŒ æ— æ³•è·å–ç»˜åˆ¶åŒºåŸŸè¾¹ç•Œ","warning"),q();return}const c=u.getSouthWest(),p=u.getNorthEast();if(!c||!p){console.error("è¾¹ç•Œåæ ‡æ— æ•ˆ"),h("âŒ è¾¹ç•Œåæ ‡æ— æ•ˆ","warning"),q();return}const d=Math.abs(p.lat-c.lat),m=Math.abs(p.lng-c.lng);if(console.log("çŸ©å½¢å°ºå¯¸:",{latDiff:d,lngDiff:m}),d<1e-4||m<1e-4){console.log("çŸ©å½¢å¤ªå°ï¼Œé‡æ–°ç»˜åˆ¶"),h("âš ï¸ ç»˜åˆ¶çš„åŒºåŸŸå¤ªå°ï¼Œè¯·é‡æ–°ç»˜åˆ¶","warning"),q();return}console.log("ç»˜åˆ¶å®Œæˆï¼Œå½“å‰å·¥å…·ç±»å‹:",S.value),console.log("çŸ©å½¢å¯¹è±¡:",e),S.value==="rectangleZoomOut"?(console.log("âœ… è°ƒç”¨ç¼©å°æ–¹æ³•ï¼ŒçŸ©å½¢å¯¹è±¡:",e),Do.rectangleZoomOut(e),setTimeout(()=>{console.log("ç¼©å°å®Œæˆï¼Œé‡ç½®çŠ¶æ€"),S.value="",q()},100)):S.value==="rectangleZoom"?(console.log("âœ… è°ƒç”¨æ”¾å¤§æ–¹æ³•ï¼ŒçŸ©å½¢å¯¹è±¡:",e),Do.rectangleZoom(e),setTimeout(()=>{console.log("æ”¾å¤§å®Œæˆï¼Œé‡ç½®çŠ¶æ€"),S.value="",q()},100)):(console.log("âŒ æœªçŸ¥çš„å·¥å…·ç±»å‹:",S.value),console.log("å½“å‰activeMapToolå€¼:",S.value),console.log("å½“å‰zoomModeå€¼:",N.value),h("âŒ æœªçŸ¥çš„ç¼©æ”¾æ¨¡å¼","warning"),q())}catch(u){console.error("å¤„ç†çŸ©å½¢ç»˜åˆ¶å®Œæˆæ—¶å‡ºé”™:",u),h("âŒ å¤„ç†ç»˜åˆ¶ç»“æœå¤±è´¥","warning"),q()}};console.log("ç»‘å®šçŸ©å½¢ç»˜åˆ¶äº‹ä»¶ç›‘å¬å™¨");try{s.value.off("mousedown"),s.value.off("mousemove"),s.value.off("mouseup"),s.value.on("mousedown",t),s.value.on("mousemove",l),s.value.on("mouseup",i),console.log("çŸ©å½¢ç»˜åˆ¶äº‹ä»¶ç›‘å¬å™¨ç»‘å®šå®Œæˆ")}catch(a){console.error("ç»‘å®šäº‹ä»¶ç›‘å¬å™¨å¤±è´¥:",a),h("âŒ è®¾ç½®ç»˜åˆ¶æ¨¡å¼å¤±è´¥","warning"),q()}},Ve=b(""),de=b(""),Qe=b("monitoringPoints"),Bt=()=>({monitoringPoints:"è¯·è¾“å…¥æ°´åº“åç§°",beijingReservoirs:"è¯·è¾“å…¥æ°´åº“åç§°",settlements:"è¯·è¾“å…¥å±…æ°‘ç‚¹åç§°",districts:"è¯·è¾“å…¥è¡Œæ”¿åŒºåˆ’åç§°",waterLines:"è¯·è¾“å…¥æ²³æµåç§°"})[Qe.value]||"è¯·è¾“å…¥æŸ¥è¯¢å†…å®¹",To=()=>{if(console.log("handleSearchå‡½æ•°è¢«è°ƒç”¨"),de.value="",!Ve.value.trim()){de.value="è¯·è¾“å…¥æŸ¥è¯¢å†…å®¹";return}const o=Qe.value;console.log("é€‰æ‹©çš„å›¾å±‚:",o);const e=P[o];if(console.log("å›¾å±‚å¯¹è±¡:",e),!e){de.value=`${Je(o)}å›¾å±‚æœªåŠ è½½`;return}console.log("å¼€å§‹æŸ¥è¯¢ï¼Œæœç´¢æ–‡æœ¬:",Ve.value.trim()),se.value=o;let t=!1,l=0;if(!e.getLayers||e.getLayers().length===0){de.value=`${Je(o)}å›¾å±‚æ²¡æœ‰æ•°æ®`;return}const i=e.getLayers?e.getLayers():[];console.log(`å›¾å±‚${o}æœ‰${i.length}ä¸ªè¦ç´ `),i.forEach((a,u)=>{const c=a.feature&&a.feature.properties;if(c){l++;let p=!1;const d=Ve.value.trim();switch(l<=3&&console.log(`è¦ç´ ${l}çš„å±æ€§:`,c),o){case"monitoringPoints":p=c.name&&(c.name===d||c.name.includes(d))||c.NAME&&(c.NAME===d||c.NAME.includes(d))||c.åº“å&&(c.åº“å===d||c.åº“å.includes(d));break;case"beijingReservoirs":p=c.name&&(c.name===d||c.name.includes(d))||c.åº“å&&(c.åº“å===d||c.åº“å.includes(d))||c.NAME&&(c.NAME===d||c.NAME.includes(d));break;case"settlements":p=c.NAME&&(c.NAME===d||c.NAME.includes(d));break;case"districts":p=c.NAME&&(c.NAME===d||c.NAME.includes(d));break;case"waterLines":p=c.name&&(c.name===d||c.name.includes(d));break;default:console.log("æœªçŸ¥çš„å›¾å±‚ç±»å‹:",o);break}if(l<=5&&console.log(`è¦ç´ ${l}åŒ¹é…ç»“æœ:`,p,"æœç´¢å€¼:",d,"å±æ€§:",c),p){console.log("æ‰¾åˆ°åŒ¹é…çš„è¦ç´ :",c),t=!0;const m=a.getBounds?a.getBounds():null;if(m)s.value.fitBounds(m,{padding:[50,50]});else{const y=a.getLatLng?a.getLatLng():null;y&&s.value.setView(y,14,{animate:!0})}if(a.setStyle&&(a.setStyle({color:"#ff0000",fillColor:"#ffcccc",weight:4}),setTimeout(()=>e.resetStyle&&e.resetStyle(a),2e3)),de.value="",console.log("æŸ¥è¯¢æˆåŠŸï¼Œé¢æ¿çŠ¶æ€:",{showReservoirImgPanel:le.value,showFloodHistoryPanel:he.value,reservoirImgName:w.value,reservoirImgUrl:Ke.value}),o==="beijingReservoirs"){const y=c.name||c.åº“å||c.NAME;y&&(console.log("æ˜¾ç¤ºæ°´åº“é¢æ¿:",y),Ke.value=`/reservoir-images/${y}.jpg`,w.value=y,$.value=c,console.log("ä¿å­˜æ°´åº“å±æ€§æ•°æ®:",c),le.value=!1,Be(()=>{le.value=!0}),y==="æ€€æŸ”æ°´åº“"||y==="å¯†äº‘æ°´åº“"||y==="åŒ—å°ä¸Šæ°´åº“"||y==="åä¸‰é™µæ°´åº“"||y==="å®˜å…æ°´åº“"||y==="å´‡é’æ°´åº“"||y==="æ–‹å ‚æ°´åº“"?console.log("æ°´åº“æ”¯æŒé˜²æ´ªå†å²:",y):he.value=!1)}else if(o==="monitoringPoints"){const y=c.name||c.åº“å||c.NAME;y&&(console.log("æ˜¾ç¤ºç›‘æµ‹ç‚¹é¢æ¿:",y),w.value=y,$.value=c,console.log("ä¿å­˜ç›‘æµ‹ç‚¹å±æ€§æ•°æ®:",c),le.value=!1,Be(()=>{le.value=!0}))}else le.value=!1,he.value=!1}}}),t||(de.value=`æœªæ‰¾åˆ°å¯¹åº”çš„${Je(o)}`,le.value=!1,he.value=!1)},Je=o=>({monitoringPoints:"æ°´åº“ç›‘æµ‹ç‚¹",beijingReservoirs:"æ°´åº“",settlements:"å±…æ°‘ç‚¹",districts:"è¡Œæ”¿åŒºåˆ’",waterLines:"æ²³æµ"})[o]||"è¦ç´ ",Rt=o=>({name:"åç§°",NAME:"åç§°",åº“å:"åº“å",area:"é¢ç§¯",AREA:"é¢ç§¯",é¢ç§¯:"é¢ç§¯",region:"æ‰€å±åœ°åŒº",REGION:"æ‰€å±åœ°åŒº",æ‰€å±åœ°åŒº:"æ‰€å±åœ°åŒº",depth:"å¹³å‡æ°´æ·±",DEPTH:"å¹³å‡æ°´æ·±",å¹³å‡æ°´æ·±:"å¹³å‡æ°´æ·±",buildTime:"å»ºåº“æ—¶é—´",BUILD_TIME:"å»ºåº“æ—¶é—´",å»ºåº“æ—¶é—´:"å»ºåº“æ—¶é—´",waterSystem:"æ°´ç³»",WATER_SYSTEM:"æ°´ç³»",æ°´ç³»:"æ°´ç³»",useTime:"æŠ•ç”¨æ—¶é—´",USE_TIME:"æŠ•ç”¨æ—¶é—´",æŠ•ç”¨æ—¶é—´:"æŠ•ç”¨æ—¶é—´",capacity:"åº“å®¹",CAPACITY:"åº“å®¹",åº“å®¹:"åº“å®¹",maxFloodYear:"æœ€å¤§æ´ªå³°å¹´ä»½",MAX_FLOOD_YEAR:"æœ€å¤§æ´ªå³°å¹´ä»½",æœ€å¤§æ´ªå³°å¹´ä»½:"æœ€å¤§æ´ªå³°å¹´ä»½",maxFloodFlow:"æœ€å¤§æ´ªå³°æµé‡",MAX_FLOOD_FLOW:"æœ€å¤§æ´ªå³°æµé‡",æœ€å¤§æ´ªå³°æµé‡:"æœ€å¤§æ´ªå³°æµé‡",type:"ç±»å‹",TYPE:"ç±»å‹",ç±»å‹:"ç±»å‹",status:"çŠ¶æ€",STATUS:"çŠ¶æ€",çŠ¶æ€:"çŠ¶æ€",description:"æè¿°",DESCRIPTION:"æè¿°",æè¿°:"æè¿°"})[o]||o,Ot=o=>o==null||o===""?"æš‚æ— æ•°æ®":typeof o=="number"?o>1e6?(o/1e6).toFixed(2)+"ç™¾ä¸‡":o>1e3?(o/1e3).toFixed(2)+"åƒ":o.toString():o.toString(),Zt=()=>[{key:"åº“å",label:"åº“å"},{key:"å¤šå¹´å¹³å‡åº“æ°´ä½",label:"å¤šå¹´å¹³å‡åº“æ°´ä½"},{key:"å¤šå¹´å¹³å‡è“„æ°´é‡",label:"å¤šå¹´å¹³å‡è“„æ°´é‡"},{key:"å¤šå¹´æ—¥å¹³å‡å…¥åº“æµé‡",label:"å¤šå¹´æ—¥å¹³å‡å…¥åº“å¾„æµ"},{key:"å¤šå¹´æ—¥å¹³å‡å‡ºåº“æµé‡",label:"å¤šå¹´æ—¥å¹³å‡å‡ºåº“å¾„æµ"},{key:"æ€»åº“å®¹",label:"æ€»åº“å®¹"},{key:"æ±›é™æ°´ä½",label:"æ±›é™æ°´ä½"}],Ut=(o,e)=>{if(o==="å¤šå¹´æ—¥å¹³å‡å…¥åº“æµé‡"&&w.value==="å¯†äº‘æ°´åº“")return"73.42 ä¸‡ç«‹æ–¹ç±³";if(o==="å¤šå¹´æ—¥å¹³å‡å‡ºåº“æµé‡"&&w.value==="å¯†äº‘æ°´åº“")return"69.12 ä¸‡ç«‹æ–¹ç±³";if(e==null||e==="")return"æš‚æ— æ•°æ®";switch(o){case"åº“å":return e.toString();case"å¤šå¹´å¹³å‡åº“æ°´ä½":case"æ±›é™æ°´ä½":return e.toString()+" ç±³";case"å¤šå¹´å¹³å‡è“„æ°´é‡":case"æ€»åº“å®¹":return e.toString()+" ä¸‡ç«‹æ–¹ç±³";case"å¤šå¹´æ—¥å¹³å‡å…¥åº“æµé‡":case"å¤šå¹´æ—¥å¹³å‡å‡ºåº“æµé‡":return e.toString()+" mÂ³/s";default:return e.toString()}},Wt=()=>se.value==="monitoringPoints"?"ç›‘æµ‹ç‚¹ä¿¡æ¯":se.value==="beijingReservoirs"?`${w.value} - æ°´åº“ä¿¡æ¯`:w.value,Yt=()=>se.value==="monitoringPoints"?"ç›‘æµ‹ç‚¹å‚æ•°è¯¦æƒ…":se.value==="beijingReservoirs"?"æ°´åº“åŸºæœ¬ä¿¡æ¯è¯¦æƒ…":"å‚æ•°è¯¦æƒ…",Ht=o=>({name:"ç›‘æµ‹ç‚¹åç§°",NAME:"ç›‘æµ‹ç‚¹åç§°",åº“å:"ç›‘æµ‹ç‚¹åç§°",å¹´å¹³å‡æ°¨æ°®:"å¹´å¹³å‡æ°¨æ°®",å¹´å¹³å‡é«˜çŒ›é…¸ç›:"å¹´å¹³å‡é«˜çŒ›é…¸ç›",å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡:"å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡",å¹´å¹³å‡æµé‡:"å¹´å¹³å‡æµé‡",å¹´å¹³å‡æ°´æ·±:"å¹´å¹³å‡æ°´æ·±",å¹´å¹³å‡æ€»æ°®:"å¹´å¹³å‡æ€»æ°®",å¹´å¹³å‡æ€»ç£·:"å¹´å¹³å‡æ€»ç£·",type:"ç±»å‹",TYPE:"ç±»å‹",status:"çŠ¶æ€",STATUS:"çŠ¶æ€",description:"æè¿°",DESCRIPTION:"æè¿°"})[o]||o,Xt=(o,e)=>{if(e==null||e==="")return"æš‚æ— æ•°æ®";switch(o){case"å¹´å¹³å‡æ°¨æ°®":case"å¹´å¹³å‡é«˜çŒ›é…¸ç›":case"å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡":case"å¹´å¹³å‡æ€»æ°®":case"å¹´å¹³å‡æ€»ç£·":return e.toString()+" mg/L";case"å¹´å¹³å‡æµé‡":return e.toString()+" mÂ³/s";case"å¹´å¹³å‡æ°´æ·±":return e.toString()+" m";default:return e.toString()}},qt=()=>{if(console.log("playReservoirVideo å‡½æ•°è¢«è°ƒç”¨"),console.log("å½“å‰æ°´åº“åç§°:",w.value),w.value==="å¯†äº‘æ°´åº“"){console.log("å¼€å§‹åˆ›å»ºè§†é¢‘æ’­æ”¾æ¨¡æ€æ¡†");const o="/videos/å¯†äº‘æ°´åº“.mp4",e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.zIndex="10000";const t=document.createElement("div");t.style.backgroundColor="white",t.style.padding="20px",t.style.borderRadius="8px",t.style.position="relative",t.style.boxShadow="0 4px 20px rgba(0, 0, 0, 0.3)",t.style.maxWidth="90vw",t.style.maxHeight="90vh",t.style.overflow="auto";const l=document.createElement("div");l.innerHTML=`
      <div style="text-align: center; padding: 20px;">
        <h3>æ­£åœ¨åŠ è½½è§†é¢‘...</h3>
        <p>è¯·ç¨å€™</p>
      </div>
    `,t.appendChild(l);const i=document.createElement("video");i.src=o,i.controls=!0,i.style.width="100%",i.style.maxWidth="800px",i.style.height="auto",i.addEventListener("loadeddata",()=>{l.parentNode&&l.parentNode.removeChild(l)});const a=document.createElement("button");a.innerHTML="Ã—",a.style.position="absolute",a.style.top="10px",a.style.right="15px",a.style.background="none",a.style.border="none",a.style.fontSize="24px",a.style.cursor="pointer",a.style.color="#666",a.onclick=()=>{document.body.removeChild(e)},t.appendChild(a),t.appendChild(i),e.appendChild(t),document.body.appendChild(e),i.play().catch(u=>{console.log("è§†é¢‘æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½æ˜¯æœ¬åœ°æ–‡ä»¶è·¯å¾„é—®é¢˜:",u);const c=document.createElement("div");c.innerHTML=`
        <div style="text-align: center; padding: 20px;">
          <h3>è§†é¢‘æ’­æ”¾å¤±è´¥</h3>
          <p>æ— æ³•æ’­æ”¾è§†é¢‘æ–‡ä»¶: ${o}</p>
          <p>è¯·ç¡®ä¿è§†é¢‘æ–‡ä»¶å­˜åœ¨ä¸”è·¯å¾„æ­£ç¡®</p>
          <button onclick="this.parentElement.parentElement.parentElement.remove()" style="margin-top: 10px; padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">ç¡®å®š</button>
        </div>
      `,t.innerHTML="",t.appendChild(c)})}},le=b(!1),Ke=b(""),w=b(""),he=b(!1),co=b(!1),$=b(null),se=b(""),ve=b([]),ee=b(-1),vo=b(!1),go=b(!1),po=b(!1),mo=b(null),Io=b(null),Pe=b([{id:"group-1",name:"å›¾å±•",type:"group",visible:!0,children:[{id:"beijing-resident-places",name:"å±…æ°‘ç‚¹",type:"point",visible:!0}]},{id:"layer-1",name:"è¡Œæ”¿åŒºåˆ’",type:"polygon",visible:!0},{id:"layer-2",name:"æ²³æµ",type:"line",visible:!0},{id:"layer-3",name:"æ°´ç³»é¢æ•°æ®",type:"polygon",visible:!0},{id:"layer-4",name:"æ°´åº“æ•°æ®",type:"polygon",visible:!0}]),ae={æ€€æŸ”æ°´åº“:{ä¸­æ–‡å:"æ€€æŸ”æ°´åº“",é¢ç§¯:"12 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"6.00ç±³",å»ºåº“æ—¶é—´:"1958å¹´3æœˆ",æ°´ç³»:"æµ·æ²³æ”¯æµæ½®ç™½æ²³æ”¯æµæ€€æ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1958å¹´7æœˆ20æ—¥",åº“å®¹:"1äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1972å¹´",æœ€å¤§æ´ªå³°æµé‡:"4245ç«‹æ–¹ç±³/ç§’"},å¯†äº‘æ°´åº“:{ä¸­æ–‡å:"å¯†äº‘æ°´åº“",é¢ç§¯:"188 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"30ç±³",å»ºåº“æ—¶é—´:"1958å¹´9æœˆ",æ°´ç³»:"æµ·æ²³æ”¯æµæ½®ç™½æ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1960å¹´9æœˆ",åº“å®¹:"43.75äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1976å¹´",æœ€å¤§æ´ªå³°æµé‡:"3670ç«‹æ–¹ç±³/ç§’"},åŒ—å°ä¸Šæ°´åº“:{ä¸­æ–‡å:"åŒ—å°ä¸Šæ°´åº“",é¢ç§¯:"8.5 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"12ç±³",å»ºåº“æ—¶é—´:"1973å¹´",æ°´ç³»:"æµ·æ²³æ”¯æµæ½®ç™½æ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1975å¹´",åº“å®¹:"1.2äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1980å¹´",æœ€å¤§æ´ªå³°æµé‡:"850ç«‹æ–¹ç±³/ç§’"},åä¸‰é™µæ°´åº“:{ä¸­æ–‡å:"åä¸‰é™µæ°´åº“",é¢ç§¯:"15.2 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"18ç±³",å»ºåº“æ—¶é—´:"1958å¹´",æ°´ç³»:"æµ·æ²³æ”¯æµæ¸©æ¦†æ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1960å¹´",åº“å®¹:"2.8äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1975å¹´",æœ€å¤§æ´ªå³°æµé‡:"1200ç«‹æ–¹ç±³/ç§’"},å®˜å…æ°´åº“:{ä¸­æ–‡å:"å®˜å…æ°´åº“",é¢ç§¯:"280 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"25ç±³",å»ºåº“æ—¶é—´:"1951å¹´",æ°´ç³»:"æµ·æ²³æ”¯æµæ°¸å®šæ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1954å¹´",åº“å®¹:"41.6äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1963å¹´",æœ€å¤§æ´ªå³°æµé‡:"3200ç«‹æ–¹ç±³/ç§’"},å´‡é’æ°´åº“:{ä¸­æ–‡å:"å´‡é’æ°´åº“",é¢ç§¯:"6.8 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"10ç±³",å»ºåº“æ—¶é—´:"1976å¹´",æ°´ç³»:"æµ·æ²³æ”¯æµæ½®ç™½æ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1978å¹´",åº“å®¹:"0.8äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1982å¹´",æœ€å¤§æ´ªå³°æµé‡:"650ç«‹æ–¹ç±³/ç§’"},æ–‹å ‚æ°´åº“:{ä¸­æ–‡å:"æ–‹å ‚æ°´åº“",é¢ç§¯:"12.5 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"15ç±³",å»ºåº“æ—¶é—´:"1974å¹´",æ°´ç³»:"æµ·æ²³æ”¯æµæ°¸å®šæ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1976å¹´",åº“å®¹:"1.5äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1981å¹´",æœ€å¤§æ´ªå³°æµé‡:"950ç«‹æ–¹ç±³/ç§’"},æ¡ƒå³ªå£æ°´åº“:{ä¸­æ–‡å:"æ¡ƒå³ªå£æ°´åº“",é¢ç§¯:"8.2 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"12ç±³",å»ºåº“æ—¶é—´:"1975å¹´",æ°´ç³»:"æµ·æ²³æ”¯æµæ½®ç™½æ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1977å¹´",åº“å®¹:"1.0äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1983å¹´",æœ€å¤§æ´ªå³°æµé‡:"780ç«‹æ–¹ç±³/ç§’"},æ²™å‚æ°´åº“:{ä¸­æ–‡å:"æ²™å‚æ°´åº“",é¢ç§¯:"6.5 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"14ç±³",å»ºåº“æ—¶é—´:"1976å¹´",æ°´ç³»:"æµ·æ²³æ”¯æµæ½®ç™½æ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1978å¹´",åº“å®¹:"0.9äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1984å¹´",æœ€å¤§æ´ªå³°æµé‡:"620ç«‹æ–¹ç±³/ç§’"},æµ·å­æ°´åº“:{ä¸­æ–‡å:"æµ·å­æ°´åº“",é¢ç§¯:"5.8 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"11ç±³",å»ºåº“æ—¶é—´:"1977å¹´",æ°´ç³»:"æµ·æ²³æ”¯æµæ½®ç™½æ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1979å¹´",åº“å®¹:"0.7äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1985å¹´",æœ€å¤§æ´ªå³°æµé‡:"580ç«‹æ–¹ç±³/ç§’"},ç™½æ²³å ¡æ°´åº“:{ä¸­æ–‡å:"ç™½æ²³å ¡æ°´åº“",é¢ç§¯:"7.2 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"13ç±³",å»ºåº“æ—¶é—´:"1978å¹´",æ°´ç³»:"æµ·æ²³æ”¯æµæ½®ç™½æ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1980å¹´",åº“å®¹:"1.1äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1986å¹´",æœ€å¤§æ´ªå³°æµé‡:"720ç«‹æ–¹ç±³/ç§’"},é¥æ¡¥å³ªæ°´åº“:{ä¸­æ–‡å:"é¥æ¡¥å³ªæ°´åº“",é¢ç§¯:"4.6 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"9ç±³",å»ºåº“æ—¶é—´:"1979å¹´",æ°´ç³»:"æµ·æ²³æ”¯æµæ½®ç™½æ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1981å¹´",åº“å®¹:"0.5äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1987å¹´",æœ€å¤§æ´ªå³°æµé‡:"450ç«‹æ–¹ç±³/ç§’"},é»„æ¾å³ªæ°´åº“:{ä¸­æ–‡å:"é»„æ¾å³ªæ°´åº“",é¢ç§¯:"3.8 kmÂ²",æ‰€å±åœ°åŒº:"åŒ—äº¬",å¹³å‡æ°´æ·±:"8ç±³",å»ºåº“æ—¶é—´:"1980å¹´",æ°´ç³»:"æµ·æ²³æ”¯æµæ½®ç™½æ²³æ°´ç³»",æŠ•ç”¨æ—¶é—´:"1982å¹´",åº“å®¹:"0.4äº¿ç«‹æ–¹ç±³",æœ€å¤§æ´ªå³°å¹´ä»½:"1988å¹´",æœ€å¤§æ´ªå³°æµé‡:"380ç«‹æ–¹ç±³/ç§’"}},_=b("monitoringPoints"),Gt=b(["å¹´å¹³å‡æ°¨æ°®","å¹´å¹³å‡é«˜çŒ›é…¸ç›","å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡","å¹´å¹³å‡æµé‡","å¹´å¹³å‡æ°´æ·±","å¹´å¹³å‡æ€»æ°®","å¹´å¹³å‡æ€»ç£·"]),Qt=b(["å¤šå¹´å¹³å‡åº“æ°´ä½","å¤šå¹´å¹³å‡è“„æ°´é‡","å¤šå¹´æ—¥å¹³å‡å…¥åº“æµé‡","å¤šå¹´æ—¥å¹³å‡å‡ºåº“æµé‡","æ€»åº“å®¹","æ±›é™æ°´ä½"]),fo={å¹´å¹³å‡æ°¨æ°®:"mg/L",å¹´å¹³å‡é«˜çŒ›é…¸ç›:"mg/L",å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡:"mg/L",å¹´å¹³å‡æµé‡:"mÂ³/s",å¹´å¹³å‡æ°´æ·±:"m",å¹´å¹³å‡æ€»æ°®:"mg/L",å¹´å¹³å‡æ€»ç£·:"mg/L",å¤šå¹´å¹³å‡åº“æ°´ä½:"m",å¤šå¹´å¹³å‡è“„æ°´é‡:"ä¸‡mÂ³",å¤šå¹´æ—¥å¹³å‡å…¥åº“æµé‡:"mÂ³/s",å¤šå¹´æ—¥å¹³å‡å‡ºåº“æµé‡:"mÂ³/s",æ€»åº“å®¹:"ä¸‡mÂ³",æ±›é™æ°´ä½:"m"},Jt=Fn(()=>(_.value==="monitoringPoints"?Gt.value:Qt.value).map(e=>{const t=fo[e]||"";return{value:e,label:t?`${e} (${t})`:e}})),Z=b("å¹´å¹³å‡æ°¨æ°®"),U=b(""),oe=b(3),X=b([]),ge=b(!1),No=b(""),_o=b([]),jo={1:["#ff4d4f"],2:["#ff4d4f","#52c41a"],3:["#ff4d4f","#ffd700","#52c41a"],4:["#ff4d4f","#ff7a45","#ffd700","#52c41a"],5:["#ff4d4f","#ff7a45","#ffd700","#73d13d","#52c41a"],6:["#ff4d4f","#ff7a45","#ffd700","#bae637","#73d13d","#52c41a"]},Kt=()=>{_.value==="monitoringPoints"?Z.value="å¹´å¹³å‡æ°¨æ°®":_.value==="beijingReservoirs"&&(Z.value="æ€»åº“å®¹"),X.value=[],ge.value=!1},en=()=>{X.value=[],ge.value=!1},on=()=>{X.value=[],ge.value=!1},tn=(o,e)=>{if(o.length===0||e<=0||e>o.length)return[];const t=[...o].sort((a,u)=>a-u);if(e>=o.length)return t.map((a,u)=>({min:parseFloat(a.toFixed(2)),max:parseFloat(a.toFixed(2)),color:jo[Math.min(e,6)][u]||"#999999"}));const l=Math.ceil(o.length/e),i=[];for(let a=0;a<e;a++){const u=a*l;let c=Math.min((a+1)*l,o.length);a===e-1&&(c=o.length);const p=t[u],d=t[c-1];i.push({min:parseFloat(p.toFixed(2)),max:parseFloat(d.toFixed(2)),color:jo[e][a]||"#999999"})}return i},nn=()=>{U.value="",console.log("=== å¼€å§‹åˆ†çº§æ¸²æŸ“ ==="),console.log("1. åŸºæœ¬å‚æ•°æ£€æŸ¥:"),console.log("  - é€‰ä¸­çš„å›¾å±‚:",_.value),console.log("  - é€‰ä¸­çš„å­—æ®µ:",Z.value),console.log("  - åˆ†çº§æ•°é‡:",oe.value),console.log("2. å›¾å±‚å¯¹è±¡æ£€æŸ¥:"),console.log("  - å½“å‰å›¾å±‚å¯¹è±¡:",P),console.log("  - é€‰ä¸­çš„æ¸²æŸ“å›¾å±‚:",_.value),console.log("  - å›¾å±‚æ˜¯å¦å­˜åœ¨:",!!P[_.value]),console.log("  - å›¾å±‚å¯¹è±¡ç±»å‹:",typeof P[_.value]);const o=P[_.value];if(!o){const e=`${_.value==="monitoringPoints"?"ç›‘æµ‹ç‚¹":"æ°´åº“"}å›¾å±‚æœªåŠ è½½`;console.error("âŒ æ¸²æŸ“å¤±è´¥:",e),U.value=e;return}if(!Z.value){const e="è¯·é€‰æ‹©å­—æ®µ";console.error("âŒ æ¸²æŸ“å¤±è´¥:",e),U.value=e;return}try{console.log("3. å¼€å§‹æ”¶é›†å›¾å±‚æ•°æ®...");const e=[],t=[];if(console.log("  - æ£€æŸ¥å›¾å±‚æ–¹æ³•:"),console.log("    * å›¾å±‚å¯¹è±¡:",o),console.log("    * æ˜¯å¦æœ‰eachLayeræ–¹æ³•:",!!o.eachLayer),console.log("    * å›¾å±‚ç±»å‹:",o.constructor.name),console.log("    * å›¾å±‚å±æ€§:",Object.keys(o)),!o.eachLayer){const C="å›¾å±‚å¯¹è±¡æ²¡æœ‰eachLayeræ–¹æ³•";console.error("âŒ æ¸²æŸ“å¤±è´¥:",C),U.value=C;return}console.log("  - å¼€å§‹éå†å›¾å±‚è¦ç´ ...");let l=0,i=0;if(o.eachLayer(C=>{l++;const x=C.feature&&C.feature.properties;if(x&&x[Z.value]!==void 0&&x[Z.value]!==null){const V=parseFloat(x[Z.value]);isNaN(V)||(e.push(V),t.push(C),i++)}}),console.log("4. æ•°æ®æ”¶é›†ç»“æœ:"),console.log("  - éå†çš„è¦ç´ æ€»æ•°:",l),console.log("  - æœ‰æ•ˆæ•°æ®å€¼æ•°é‡:",e.length),console.log("  - æ”¶é›†åˆ°çš„è¦ç´ æ•°é‡:",t.length),console.log("  - æ•°æ®å€¼èŒƒå›´:",e.length>0?`${Math.min(...e)} - ${Math.max(...e)}`:"æ— æ•°æ®"),console.log("  - æ ·æœ¬æ•°æ®å€¼:",e.slice(0,5)),e.length===0){const C="æ‰€é€‰å­—æ®µæ²¡æœ‰æœ‰æ•ˆçš„æ•°å€¼æ•°æ®";console.error("âŒ æ¸²æŸ“å¤±è´¥:",C),U.value=C;return}if(e.length<oe.value){const C=`æ•°æ®ç‚¹æ•°é‡(${e.length})å°‘äºåˆ†çº§æ•°é‡(${oe.value})ï¼Œæ— æ³•è¿›è¡Œç­‰é‡åˆ†çº§`;console.error("âŒ æ¸²æŸ“å¤±è´¥:",C),U.value=C;return}console.log("5. å¼€å§‹è®¡ç®—ç­‰é‡åˆ†çº§...");const a=tn(e,oe.value);if(console.log("  - åˆ†çº§ç®—æ³•ç»“æœ:",a),!a||a.length===0){const C="åˆ†çº§è®¡ç®—å¤±è´¥";console.error("âŒ æ¸²æŸ“å¤±è´¥:",C),U.value=C;return}X.value=a,console.log("6. åˆ†çº§ç»“æœå·²ä¿å­˜:",X.value);const u=new Array(oe.value).fill(0);console.log("7. å¼€å§‹åº”ç”¨åˆ†çº§æ¸²æŸ“...");let c=0;t.forEach((C,x)=>{const V=C.feature.properties,ie=parseFloat(V[Z.value]);let be=-1;for(let R=0;R<X.value.length;R++){const pe=X.value[R];if(ie>=pe.min&&ie<=pe.max){be=R,u[R]++;break}}if(be>=0){const R=X.value[be];try{_.value==="monitoringPoints"?C.setStyle({fillColor:R.color,color:R.color,fillOpacity:.95,opacity:1,weight:2}):_.value==="beijingReservoirs"&&C.setStyle({fillColor:R.color,color:R.color,fillOpacity:.8,opacity:.9,weight:1.5}),c++}catch(pe){console.error(`æ ·å¼åº”ç”¨å¤±è´¥ (è¦ç´  ${x}):`,pe)}}}),console.log("8. æ¸²æŸ“å®Œæˆç»Ÿè®¡:"),console.log("  - æˆåŠŸåº”ç”¨æ ·å¼çš„è¦ç´ æ•°é‡:",c),console.log("  - åˆ†çº§ç»Ÿè®¡:",u),No.value=`${Z.value} ç­‰é‡åˆ†çº§`,_o.value=X.value.map((C,x)=>({...C,count:u[x]})),ge.value=!0;const p=e.length,d=Math.ceil(p/oe.value),y=u.reduce((C,x)=>C+Math.pow(x-d,2),0)/oe.value,D=Math.sqrt(y),j=`âœ… ç­‰é‡åˆ†çº§æ¸²æŸ“å®Œæˆï¼Œå…±${p}ä¸ªè¦ç´ ï¼Œæ¯ä¸ªçº§åˆ«æœŸæœ›${d}ä¸ªï¼Œæ ‡å‡†å·®${D.toFixed(2)}`;console.log("ğŸ‰ æ¸²æŸ“æˆåŠŸ:",j),U.value=j}catch(e){console.error("âŒ åˆ†çº§æ¸²æŸ“å¤±è´¥:",e),console.error("é”™è¯¯å †æ ˆ:",e.stack),U.value="åˆ†çº§æ¸²æŸ“å¤±è´¥: "+e.message}},ln=()=>{const o=P[_.value];o&&o.resetStyle(),X.value=[],ge.value=!1,U.value=""};Oo(()=>{console.log("MapEditorç»„ä»¶å·²æŒ‚è½½ï¼Œå¼€å§‹åˆå§‹åŒ–..."),Yo(),Ho(),_.value="monitoringPoints",Z.value="å¹´å¹³å‡æ°¨æ°®",oe.value=3,X.value=[],ge.value=!1,r.isActive=!1,r.annotations=[],r.autoAnnotations=[],r.manualAnnotations=[],eo(),I.value.clear(),Ee.value.clear(),Be(()=>{const o=document.getElementById("editor-map");o&&(console.log("åœ°å›¾å®¹å™¨çŠ¶æ€æ£€æŸ¥:"),console.log("åœ°å›¾å®¹å™¨å…ƒç´ :",o),console.log("åœ°å›¾å®¹å™¨CSSç±»:",o.className),console.log("åœ°å›¾å®¹å™¨æ ·å¼:",o.style.cssText),console.log("åœ°å›¾å®¹å™¨å°ºå¯¸:",o.offsetWidth,"x",o.offsetHeight),console.log("åœ°å›¾å®¹å™¨ä½ç½®:",o.offsetLeft,o.offsetTop),console.log("åœ°å›¾å®¹å™¨z-index:",getComputedStyle(o).zIndex),o.style.willChange="transform",o.style.transform="translateZ(0)"),s.value&&(s.value.options.preferCanvas=!0,s.value.options.updateWhenZooming=!1,s.value.options.updateWhenIdle=!0,s.value.options.keepBuffer=2,console.log("å…¨å±€æ€§èƒ½ä¼˜åŒ–å·²åº”ç”¨"))}),window.addEventListener("resize",Po),setTimeout(()=>{re.value&&(console.log("å¤‡ç”¨æœºåˆ¶ï¼šå¼ºåˆ¶å…³é—­åŠ è½½çŠ¶æ€å¹¶æ˜¾ç¤ºåŸºæœ¬åœ°å›¾"),re.value=!1,Re())},8e3)}),Dn(()=>{console.log("MapEditorç»„ä»¶å¸è½½ï¼Œå¼€å§‹æ¸…ç†èµ„æº..."),window.removeEventListener("resize",Po),document.removeEventListener("mousemove",$e),document.removeEventListener("mouseup",Se),document.removeEventListener("touchmove",$e),document.removeEventListener("touchend",Se),s.value&&(s.value.off("resize"),s.value.off("zoomend"),s.value.off("move"),s.value.off("moveend"),s.value.off("dragstart"),s.value.off("drag"),s.value.off("dragend"),s.value.off("click"),s.value.remove(),s.value=null),r.annotations.length>0&&(r.annotations.forEach(o=>{var e;if(o.layer)try{(e=s.value)==null||e.removeLayer(o.layer)}catch(t){console.log("æ¸…ç†æ ‡æ³¨å›¾å±‚æ—¶å‡ºé”™:",t)}}),r.annotations=[],r.autoAnnotations=[],r.manualAnnotations=[]),console.log("MapEditorç»„ä»¶èµ„æºæ¸…ç†å®Œæˆ"),to()});const sn=()=>{eo(),r.availableFields.length>0&&(r.selectedField=r.availableFields[0].value),oo(),console.log('å›¾å±‚å·²åˆ‡æ¢ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»"ç”Ÿæˆå­—æ®µæ ‡æ³¨"æŒ‰é’®')},an=()=>{oo(),console.log('å­—æ®µå·²åˆ‡æ¢ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»"ç”Ÿæˆå­—æ®µæ ‡æ³¨"æŒ‰é’®')},eo=()=>{const o=r.selectedLayer;o==="monitoringPoints"?r.availableFields=[{value:"å¹´å¹³å‡æ°¨æ°®",label:"å¹´å¹³å‡æ°¨æ°® (mg/L)"},{value:"å¹´å¹³å‡é«˜çŒ›é…¸ç›",label:"å¹´å¹³å‡é«˜çŒ›é…¸ç› (mg/L)"},{value:"å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡",label:"å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡ (mg/L)"},{value:"å¹´å¹³å‡æµé‡",label:"å¹´å¹³å‡æµé‡ (mÂ³/s)"},{value:"å¹´å¹³å‡æ°´æ·±",label:"å¹´å¹³å‡æ°´æ·± (m)"},{value:"å¹´å¹³å‡æ€»æ°®",label:"å¹´å¹³å‡æ€»æ°® (mg/L)"},{value:"å¹´å¹³å‡æ€»ç£·",label:"å¹´å¹³å‡æ€»ç£· (mg/L)"}]:o==="beijingReservoirs"?r.availableFields=[{value:"åº“å",label:"åº“å"},{value:"å¤šå¹´å¹³å‡åº“æ°´ä½",label:"å¤šå¹´å¹³å‡åº“æ°´ä½ (m)"},{value:"å¤šå¹´å¹³å‡è“„æ°´é‡",label:"å¤šå¹´å¹³å‡è“„æ°´é‡ (ä¸‡mÂ³)"},{value:"å¤šå¹´æ—¥å¹³å‡å…¥åº“æµé‡",label:"å¤šå¹´æ—¥å¹³å‡å…¥åº“æµé‡ (mÂ³/s)"},{value:"å¤šå¹´æ—¥å¹³å‡å‡ºåº“æµé‡",label:"å¤šå¹´æ—¥å¹³å‡å‡ºåº“æµé‡ (mÂ³/s)"},{value:"æ€»åº“å®¹",label:"æ€»åº“å®¹ (ä¸‡mÂ³)"},{value:"æ±›é™æ°´ä½",label:"æ±›é™æ°´ä½ (m)"}]:o==="settlements"?r.availableFields=[{value:"NAME",label:"å±…æ°‘ç‚¹åç§°"}]:o==="districts"?r.availableFields=[{value:"NAME",label:"è¡Œæ”¿åŒºåˆ’åç§°"}]:o==="waterLines"&&(r.availableFields=[{value:"name",label:"æ²³æµåç§°"}])},oo=()=>{console.log("æ¸…é™¤è‡ªåŠ¨æ ‡æ³¨è¢«è°ƒç”¨ï¼Œå½“å‰è‡ªåŠ¨æ ‡æ³¨æ•°é‡:",r.autoAnnotations.length),console.log("è°ƒç”¨æ ˆ:",new Error().stack),r.autoAnnotations.forEach(t=>{t.layer&&(console.log("ç§»é™¤æ ‡æ³¨å›¾å±‚:",t.text),s.value.removeLayer(t.layer))}),r.autoAnnotations=[];const o=r.annotations.length;r.annotations=r.annotations.filter(t=>t.type!=="auto");const e=r.annotations.length;console.log(`æ€»æ ‡æ³¨æ•°ç»„ä» ${o} å‡å°‘åˆ° ${e}`)},Vo=()=>{if(console.log("å¼€å§‹ç”Ÿæˆå­—æ®µæ ‡æ³¨..."),!r.showAutoLabels){console.log("è‡ªåŠ¨æ ‡æ³¨å·²ç¦ç”¨");return}if(!r.selectedField){console.warn("è¯·å…ˆé€‰æ‹©è¦æ ‡æ³¨çš„å­—æ®µ"),h("âš ï¸ è¯·å…ˆé€‰æ‹©è¦æ ‡æ³¨çš„å­—æ®µ","warning");return}const o=P[r.selectedLayer];if(!o){console.warn("é€‰æ‹©çš„å›¾å±‚æœªåŠ è½½:",r.selectedLayer),h("âŒ é€‰æ‹©çš„å›¾å±‚æœªåŠ è½½","warning");return}console.log("é€‰æ‹©çš„å›¾å±‚:",r.selectedLayer),console.log("é€‰æ‹©çš„å­—æ®µ:",r.selectedField),console.log("å›¾å±‚å¯¹è±¡:",o),oo();let e=0;o.eachLayer(t=>{const l=t.feature;if(l&&l.properties){console.log("å¤„ç†è¦ç´ :",l.properties);const i=yt(l,t);i&&(i.layer=ao(i),r.autoAnnotations.push(i),r.annotations.push(i),e++,console.log("åˆ›å»ºæ ‡æ³¨æˆåŠŸ:",i))}}),console.log("ç”Ÿæˆçš„æ ‡æ³¨æ•°é‡:",e),console.log("å½“å‰æ ‡æ³¨æ•°ç»„:",r.annotations),e>0?h(`âœ… æˆåŠŸç”Ÿæˆ ${e} ä¸ªå­—æ®µæ ‡æ³¨`,"success"):h("âš ï¸ æœªæ‰¾åˆ°å¯æ ‡æ³¨çš„å­—æ®µæ•°æ®","warning"),console.log("æ ‡æ³¨ç”Ÿæˆå®Œæˆï¼Œç›´æ¥æ˜¾ç¤ºåœ¨åœ°å›¾ä¸Š")},rn=o=>{try{const{type:e,feature:t,layer:l}=o;if(e==="monitoringPoints"||e==="settlements"){const i=t.geometry.coordinates,a=E.latLng(i[1],i[0]);return E.circleMarker(a,{radius:12,fillColor:"#ff0000",color:"#ffffff",weight:3,opacity:1,fillOpacity:.8})}else if(e==="waterLines"){const a=t.geometry.coordinates.map(u=>E.latLng(u[1],u[0]));return E.polyline(a,{color:"#ff0000",weight:6,opacity:1})}else{const a=t.geometry.coordinates[0].map(u=>E.latLng(u[1],u[0]));return E.polygon(a,{fillColor:"#ffcccc",color:"#ff0000",weight:3,fillOpacity:.6})}}catch(e){return console.error("åˆ›å»ºè¦ç´ é«˜äº®å›¾å±‚å¤±è´¥:",e),null}},to=()=>{I.value.clear(),Ee.value.forEach(o=>{s.value&&o&&s.value.removeLayer(o)}),Ee.value.clear(),console.log("æ‰€æœ‰è¦ç´ é€‰æ‹©å·²æ¸…é™¤")},no=o=>{if(s.value)switch(console.log("åœ°å›¾ç‚¹å‡»äº‹ä»¶:",o.latlng),S.value){case"zoomIn":handleZoomInClick(o.latlng);break;case"zoomOut":handleZoomOutClick(o.latlng);break;case"selectFeature":mn(o);break;case"identifyFeature":vn(o);break;case"annotation":mt(o.latlng);break}},Bo=()=>{if(console.log("å¼€å§‹ç»˜åˆ¶æ¨¡å¼:",{map:!!s.value,zoomMode:N.value,isDrawing:T.value}),!s.value){console.error("åœ°å›¾æœªåˆå§‹åŒ–"),h("âŒ åœ°å›¾æœªåˆå§‹åŒ–","warning");return}try{T.value=!1,N.value="",s.value&&s.value.dragging.enable(),Y.value&&(s.value.removeLayer(Y.value),Y.value=null),s.value.off("mousedown"),s.value.off("mousemove"),s.value.off("mouseup"),document.removeEventListener("keydown",uo),s.value&&(s.value.off("click"),s.value.on("click",no),console.log("åœ°å›¾ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨å·²é‡æ–°ç»‘å®š")),T.value=!0,Y.value=E.layerGroup().addTo(s.value),N.value==="rectangle"&&Vt(),console.log("ç»˜åˆ¶æ¨¡å¼å¯åŠ¨æˆåŠŸ")}catch(o){console.error("å¯åŠ¨ç»˜åˆ¶æ¨¡å¼å¤±è´¥:",o),h("âŒ å¯åŠ¨ç»˜åˆ¶æ¨¡å¼å¤±è´¥","warning"),q()}},q=()=>{console.log("finishDrawingè¢«è°ƒç”¨ï¼Œå½“å‰activeMapTool:",S.value),T.value=!1,N.value="",s.value&&s.value.dragging.enable(),Y.value&&(s.value.removeLayer(Y.value),Y.value=null),s.value.off("mousedown"),s.value.off("mousemove"),s.value.off("mouseup"),document.removeEventListener("keydown",uo),s.value&&(s.value.off("click"),s.value.on("click",no),console.log("åœ°å›¾ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨å·²é‡æ–°ç»‘å®šï¼Œæ”¯æŒæŒ‰ç‚¹æ”¾å¤§å’Œç¼©å°åŠŸèƒ½")),console.log("ç»˜åˆ¶æ¨¡å¼å·²æ¸…ç†ï¼Œåœ°å›¾ç‚¹å‡»äº‹ä»¶å·²é‡æ–°ç»‘å®š")},un=()=>{console.log("å–æ¶ˆç»˜åˆ¶è¢«è°ƒç”¨"),T.value=!1,S.value="",N.value="",s.value&&s.value.dragging.enable(),Y.value&&(s.value.removeLayer(Y.value),Y.value=null),s.value.off("mousedown"),s.value.off("mousemove"),s.value.off("mouseup"),document.removeEventListener("keydown",uo),s.value&&(s.value.off("click"),s.value.on("click",no),console.log("åœ°å›¾ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨å·²é‡æ–°ç»‘å®š")),console.log("ç»˜åˆ¶æ¨¡å¼å·²å–æ¶ˆ")},cn=()=>{const o=document.getElementById("editor-map");o&&(o.style.cursor="zoom-in",console.log("å¼ºåˆ¶è®¾ç½®æ”¾å¤§é¼ æ ‡æ ·å¼"))},dn=()=>{const o=document.getElementById("editor-map");o&&(o.style.cursor="zoom-out",console.log("å¼ºåˆ¶è®¾ç½®ç¼©å°é¼ æ ‡æ ·å¼"))},vn=o=>{if(!s.value)return;console.log("å¼€å§‹å¤„ç†è¦ç´ è¯†åˆ«ï¼Œç‚¹å‡»ä½ç½®:",o.latlng);const e=Ro(o.latlng);console.log("æ‰¾åˆ°çš„è¦ç´ :",e),e?(gn(e),h("âœ… è¦ç´ è¯†åˆ«æˆåŠŸ","success")):h("âŒ æœªæ‰¾åˆ°è¦ç´ ","warning")},gn=o=>{const{type:e,feature:t,layer:l}=o;if(t.properties){const i=pn(t.properties,e);let a;e==="monitoringPoints"||e==="settlements"?a=l.getLatLng():a=l.getBounds().getCenter(),E.popup({closeButton:!0,maxWidth:300,className:"feature-info-popup"}).setLatLng(a).setContent(i).openOn(s.value)}},h=(o,e="info")=>{const t=document.querySelector(".zoom-message");t&&t.remove();const l=document.createElement("div");l.className=`zoom-message zoom-message-${e}`,l.textContent=o;const i=document.getElementById("editor-map");i&&(i.appendChild(l),setTimeout(()=>{l.parentNode&&l.parentNode.removeChild(l)},2e3))},pn=(o,e)=>{let t='<div class="feature-info">';t+=`<h4>${Je(e)}ä¿¡æ¯</h4>`;for(const[l,i]of Object.entries(o))if(i!=null&&i!==""){const a=Rt(l),u=Ot(i);t+=`<div class="info-row"><strong>${a}:</strong> ${u}</div>`}return t+="</div>",t},mn=o=>{if(!s.value)return;console.log("å¼€å§‹å¤„ç†è¦ç´ é€‰æ‹©ï¼Œç‚¹å‡»ä½ç½®:",o.latlng);const e=Ro(o.latlng);if(console.log("æ‰¾åˆ°çš„è¦ç´ :",e),e){const t=xn(e);console.log("ç”Ÿæˆçš„è¦ç´ ID:",t),I.value.has(t)?(console.log("è¦ç´ å·²è¢«é€‰æ‹©ï¼Œæ‰§è¡Œå–æ¶ˆé€‰æ‹©"),kn(t,e),h("âœ… å·²å–æ¶ˆé€‰æ‹©è¦ç´ ","success")):(console.log("è¦ç´ æœªè¢«é€‰æ‹©ï¼Œæ‰§è¡Œé€‰æ‹©"),Ln(t,e),h("âœ… å·²é€‰æ‹©è¦ç´ ","success"))}else console.log("æœªæ‰¾åˆ°è¦ç´ ï¼Œç‚¹å‡»ç©ºç™½åŒºåŸŸ"),I.value.size>0&&(to(),h("ğŸ—‘ï¸ å·²æ¸…é™¤æ‰€æœ‰è¦ç´ é€‰æ‹©","info"))},Ro=o=>{if(!s.value)return null;console.log("å¼€å§‹æŸ¥æ‰¾è¦ç´ ï¼Œç‚¹å‡»ä½ç½®:",o),console.log("å½“å‰å›¾å±‚çŠ¶æ€:",F),console.log("å›¾å±‚å¯¹è±¡:",P);for(const[e,t]of Object.entries(P)){if(!F[e]||!t){console.log(`è·³è¿‡${e}å›¾å±‚:`,{visible:F[e],layer:!!t});continue}console.log(`æ£€æŸ¥${e}å›¾å±‚:`,t);try{if(e==="monitoringPoints"||e==="settlements"){console.log(`åœ¨${e}å›¾å±‚ä¸­æŸ¥æ‰¾ç‚¹è¦ç´ `);const l=fn(t,o);if(l)return console.log(`åœ¨${e}å›¾å±‚ä¸­æ‰¾åˆ°ç‚¹è¦ç´ :`,l),{type:e,feature:l,layer:t}}else if(e==="waterLines"){console.log(`åœ¨${e}å›¾å±‚ä¸­æŸ¥æ‰¾çº¿è¦ç´ `);const l=hn(t,o);if(l)return console.log(`åœ¨${e}å›¾å±‚ä¸­æ‰¾åˆ°çº¿è¦ç´ :`,l),{type:e,feature:l,layer:t}}else{console.log(`åœ¨${e}å›¾å±‚ä¸­æŸ¥æ‰¾é¢è¦ç´ `);const l=yn(t,o);if(l)return console.log(`åœ¨${e}å›¾å±‚ä¸­æ‰¾åˆ°é¢è¦ç´ :`,l),{type:e,feature:l,layer:t}}}catch(l){console.error(`æŸ¥æ‰¾${e}å›¾å±‚è¦ç´ æ—¶å‡ºé”™:`,l)}}return console.log("æœªæ‰¾åˆ°ä»»ä½•è¦ç´ "),null},fn=(o,e)=>{let t=null,l=1/0;return console.log("å¼€å§‹æŸ¥æ‰¾ç‚¹è¦ç´ ï¼Œå›¾å±‚:",o),console.log("ç‚¹å‡»ä½ç½®:",e),o.eachLayer(i=>{if(i.getLatLng){const a=i.getLatLng(),u=e.distanceTo(a);console.log("æ£€æŸ¥å­å›¾å±‚:",{sublayer:i,latlng:a,distance:u}),u<20&&u<l&&(l=u,t=i.feature,console.log("æ‰¾åˆ°æ›´è¿‘çš„ç‚¹è¦ç´ :",{foundFeature:t,distance:u}))}else console.log("å­å›¾å±‚æ²¡æœ‰getLatLngæ–¹æ³•:",i)}),console.log("ç‚¹è¦ç´ æŸ¥æ‰¾ç»“æœ:",{foundFeature:t,minDistance:l}),t},yn=(o,e)=>{let t=null;return o.eachLayer(l=>{if(l.getBounds&&l.getBounds().contains(e))return t=l.feature,!1}),t},hn=(o,e)=>{let t=null,l=1/0;return o.eachLayer(i=>{if(i.getLatLngs){const a=bn(e,i.getLatLngs());a<15&&a<l&&(l=a,t=i.feature)}}),t},bn=(o,e)=>{let t=1/0;for(let l=0;l<e.length-1;l++){const i=wn(o,e[l],e[l+1]);i<t&&(t=i)}return t},wn=(o,e,t)=>{const l=o.lat-e.lat,i=o.lng-e.lng,a=t.lat-e.lat,u=t.lng-e.lng,c=l*a+i*u,p=a*a+u*u;if(p===0)return o.distanceTo(e);let d=c/p;if(d<0)return o.distanceTo(e);if(d>1)return o.distanceTo(t);const m=e.lat+d*a,y=e.lng+d*u;return o.distanceTo(E.latLng(m,y))},xn=o=>{const e=o.type,t=o.feature;return t.properties&&t.properties.id?`${t.properties.id}_${e}`:t.properties&&t.properties.NAME?`${t.properties.NAME}_${e}`:t.properties&&t.properties.name?`${t.properties.name}_${e}`:`${e}_${Date.now()}_${Math.random()}`},Ln=(o,e)=>{I.value.add(o);const t=rn(e);t&&(Ee.value.set(o,t),t.addTo(s.value)),console.log("è¦ç´ å·²é€‰æ‹©:",o,e)},kn=(o,e)=>{I.value.delete(o);const t=Ee.value.get(o);t&&(s.value.removeLayer(t),Ee.value.delete(o)),console.log("è¦ç´ å·²å–æ¶ˆé€‰æ‹©:",o,e)};return(o,e)=>(v(),g("div",tl,[ke(ol,{title:"ç”µå­åœ°å›¾"}),n("div",nl,[n("div",{id:"editor-map",class:W(["editor-map",{"zoom-in-cursor":S.value==="zoomIn","zoom-out-cursor":S.value==="zoomOut","grab-cursor":S.value==="pan","grabbing-cursor":Ae.value,"pointer-cursor":S.value==="selectFeature","info-cursor":S.value==="identifyFeature","rectangle-drawing":S.value==="rectangleZoom","drawing-mode":T.value}])},null,2),n("div",{class:W(["control-panel",{"panel-hidden":!De.value}])},[n("div",ll,[e[69]||(e[69]=n("h3",null,"å›¾å±‚æ§åˆ¶",-1)),n("button",{class:"panel-toggle-btn",onClick:Ko},L(De.value?"âˆ§":"âˆ¨"),1)]),k(n("div",sl,[n("div",al,[n("label",null,[k(n("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>F.districts=t),onChange:e[1]||(e[1]=t=>ze("districts"))},null,544),[[G,F.districts]]),e[70]||(e[70]=z(" è¡Œæ”¿åŒºåˆ’ ",-1))]),n("div",il,[n("div",{class:"color-preview",style:fe({backgroundColor:M.districts}),onClick:e[2]||(e[2]=t=>Ie("districts"))},null,4),k(n("input",{type:"color","onUpdate:modelValue":e[3]||(e[3]=t=>M.districts=t),onChange:e[4]||(e[4]=t=>Ne("districts")),class:"color-input","data-layer":"districts"},null,544),[[O,M.districts]])])]),n("div",rl,[n("label",null,[k(n("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=t=>F.waterLines=t),onChange:e[6]||(e[6]=t=>ze("waterLines"))},null,544),[[G,F.waterLines]]),e[71]||(e[71]=z(" æ²³æµ ",-1))]),n("div",ul,[n("div",{class:"color-preview",style:fe({backgroundColor:M.waterLines}),onClick:e[7]||(e[7]=t=>Ie("waterLines"))},null,4),k(n("input",{type:"color","onUpdate:modelValue":e[8]||(e[8]=t=>M.waterLines=t),onChange:e[9]||(e[9]=t=>Ne("waterLines")),class:"color-input","data-layer":"waterLines"},null,544),[[O,M.waterLines]])])]),n("div",cl,[n("label",null,[k(n("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=t=>F.beijingReservoirs=t),onChange:e[11]||(e[11]=t=>ze("beijingReservoirs"))},null,544),[[G,F.beijingReservoirs]]),e[72]||(e[72]=z(" æ°´åº“ ",-1))]),n("div",dl,[n("div",{class:"color-preview",style:fe({backgroundColor:M.beijingReservoirs}),onClick:e[12]||(e[12]=t=>Ie("beijingReservoirs"))},null,4),k(n("input",{type:"color","onUpdate:modelValue":e[13]||(e[13]=t=>M.beijingReservoirs=t),onChange:e[14]||(e[14]=t=>Ne("beijingReservoirs")),class:"color-input","data-layer":"beijingReservoirs"},null,544),[[O,M.beijingReservoirs]])])]),n("div",vl,[n("label",null,[k(n("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=t=>F.monitoringPoints=t),onChange:e[16]||(e[16]=t=>ze("monitoringPoints"))},null,544),[[G,F.monitoringPoints]]),e[73]||(e[73]=z(" ç›‘æµ‹ç‚¹ ",-1))]),n("div",gl,[n("div",{class:"color-preview point-preview",style:fe({backgroundColor:M.monitoringPoints}),onClick:e[17]||(e[17]=t=>Ie("monitoringPoints"))},null,4),k(n("input",{type:"color","onUpdate:modelValue":e[18]||(e[18]=t=>M.monitoringPoints=t),onChange:e[19]||(e[19]=t=>Ne("monitoringPoints")),class:"color-input","data-layer":"monitoringPoints"},null,544),[[O,M.monitoringPoints]])])]),n("div",pl,[n("label",null,[k(n("input",{type:"checkbox","onUpdate:modelValue":e[20]||(e[20]=t=>F.settlements=t),onChange:e[21]||(e[21]=t=>ze("settlements"))},null,544),[[G,F.settlements]]),e[74]||(e[74]=z(" å±…æ°‘ç‚¹ ",-1))]),n("div",ml,[n("div",{class:"color-preview point-preview",style:fe({backgroundColor:M.settlements}),onClick:e[22]||(e[22]=t=>Ie("settlements"))},null,4),k(n("input",{type:"color","onUpdate:modelValue":e[23]||(e[23]=t=>M.settlements=t),onChange:e[24]||(e[24]=t=>Ne("settlements")),class:"color-input","data-layer":"settlements"},null,544),[[O,M.settlements]])])])],512),[[zn,De.value]])],2),le.value?(v(),g("div",fl,[n("span",{class:"img-panel-close",onClick:e[25]||(e[25]=t=>le.value=!1),title:"å…³é—­"},"Ã—"),Ke.value?(v(),g("img",{key:0,src:Ke.value,alt:w.value,class:"reservoir-img-main",onerror:"this.style.display='none'"},null,8,yl)):f("",!0),n("div",hl,L(Wt()),1),se.value==="beijingReservoirs"&&ae[w.value]?(v(),g("div",bl,[e[86]||(e[86]=n("div",{class:"details-title"},"æ°´åº“è¯¦ç»†ä¿¡æ¯",-1)),n("div",wl,[n("div",xl,[e[75]||(e[75]=n("span",{class:"detail-label"},"ä¸­æ–‡åï¼š",-1)),n("span",Ll,L(ae[w.value].ä¸­æ–‡å),1)]),n("div",kl,[e[76]||(e[76]=n("span",{class:"detail-label"},"é¢ç§¯ï¼š",-1)),n("span",Ml,L(ae[w.value].é¢ç§¯),1)]),n("div",Cl,[e[77]||(e[77]=n("span",{class:"detail-label"},"æ‰€å±åœ°åŒºï¼š",-1)),n("span",El,L(ae[w.value].æ‰€å±åœ°åŒº),1)]),n("div",Al,[e[78]||(e[78]=n("span",{class:"detail-label"},"å¹³å‡æ°´æ·±ï¼š",-1)),n("span",$l,L(ae[w.value].å¹³å‡æ°´æ·±),1)]),n("div",Sl,[e[79]||(e[79]=n("span",{class:"detail-label"},"å»ºåº“æ—¶é—´ï¼š",-1)),n("span",Pl,L(ae[w.value].å»ºåº“æ—¶é—´),1)]),n("div",Fl,[e[80]||(e[80]=n("span",{class:"detail-label"},"æ°´ç³»ï¼š",-1)),n("span",Dl,L(ae[w.value].æ°´ç³»),1)]),n("div",zl,[e[81]||(e[81]=n("span",{class:"detail-label"},"æŠ•ç”¨æ—¶é—´ï¼š",-1)),n("span",Tl,L(ae[w.value].æŠ•ç”¨æ—¶é—´),1)]),n("div",Il,[e[82]||(e[82]=n("span",{class:"detail-label"},"åº“å®¹ï¼š",-1)),n("span",Nl,L(ae[w.value].åº“å®¹),1)])]),n("div",_l,[n("button",{class:"reservoir-btn reservoir-params-btn",onClick:e[26]||(e[26]=t=>co.value=!0)},e[83]||(e[83]=[n("span",{class:"btn-icon"},"ğŸ“Š",-1),z(" æ°´åº“åŸºæœ¬ä¿¡æ¯ ",-1)])),n("button",{class:"reservoir-btn flood-history-btn",onClick:e[27]||(e[27]=t=>he.value=!0)},e[84]||(e[84]=[n("span",{class:"btn-icon"},"ğŸ“š",-1),z(" é˜²æ´ªå†å² ",-1)])),w.value==="å¯†äº‘æ°´åº“"?(v(),g("button",{key:0,class:"reservoir-btn play-video-btn",onClick:qt},e[85]||(e[85]=[n("span",{class:"btn-icon"},"â–¶ï¸",-1),z(" æ’­æ”¾è§†é¢‘ ",-1)]))):f("",!0)])])):f("",!0),se.value==="monitoringPoints"&&$.value?(v(),g("div",jl,[n("div",Vl,[n("div",Bl,[e[87]||(e[87]=n("span",{class:"detail-label"},"ç›‘æµ‹ç‚¹åç§°ï¼š",-1)),n("span",Rl,L($.value.name||$.value.åº“å||$.value.NAME||"æœªçŸ¥"),1)]),$.value.å¹´å¹³å‡æ°¨æ°®?(v(),g("div",Ol,[e[88]||(e[88]=n("span",{class:"detail-label"},"å¹´å¹³å‡æ°¨æ°®ï¼š",-1)),n("span",Zl,L($.value.å¹´å¹³å‡æ°¨æ°®)+" mg/L",1)])):f("",!0),$.value.å¹´å¹³å‡é«˜çŒ›é…¸ç›?(v(),g("div",Ul,[e[89]||(e[89]=n("span",{class:"detail-label"},"å¹´å¹³å‡é«˜çŒ›é…¸ç›ï¼š",-1)),n("span",Wl,L($.value.å¹´å¹³å‡é«˜çŒ›é…¸ç›)+" mg/L",1)])):f("",!0),$.value.å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡?(v(),g("div",Yl,[e[90]||(e[90]=n("span",{class:"detail-label"},"å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡ï¼š",-1)),n("span",Hl,L($.value.å¹´å¹³å‡åŒ–å­¦éœ€æ°§é‡)+" mg/L",1)])):f("",!0),$.value.å¹´å¹³å‡æµé‡?(v(),g("div",Xl,[e[91]||(e[91]=n("span",{class:"detail-label"},"å¹´å¹³å‡æµé‡ï¼š",-1)),n("span",ql,L($.value.å¹´å¹³å‡æµé‡)+" mÂ³/s",1)])):f("",!0),$.value.å¹´å¹³å‡æ°´æ·±?(v(),g("div",Gl,[e[92]||(e[92]=n("span",{class:"detail-label"},"å¹´å¹³å‡æ°´æ·±ï¼š",-1)),n("span",Ql,L($.value.å¹´å¹³å‡æ°´æ·±)+" m",1)])):f("",!0),$.value.å¹´å¹³å‡æ€»æ°®?(v(),g("div",Jl,[e[93]||(e[93]=n("span",{class:"detail-label"},"å¹´å¹³å‡æ€»æ°®ï¼š",-1)),n("span",Kl,L($.value.å¹´å¹³å‡æ€»æ°®)+" mg/L",1)])):f("",!0),$.value.å¹´å¹³å‡æ€»ç£·?(v(),g("div",es,[e[94]||(e[94]=n("span",{class:"detail-label"},"å¹´å¹³å‡æ€»ç£·ï¼š",-1)),n("span",os,L($.value.å¹´å¹³å‡æ€»ç£·)+" mg/L",1)])):f("",!0)])])):f("",!0)])):f("",!0),co.value?(v(),g("div",ts,[n("span",{class:"params-panel-close",onClick:e[28]||(e[28]=t=>co.value=!1)},"Ã—"),n("div",ns,L(Yt()),1),n("div",ls,[$.value?(v(),g("div",ss,[se.value==="beijingReservoirs"?(v(),g("div",as,[(v(!0),g(we,null,xe(Zt(),t=>(v(),g("div",{key:t.key,class:"param-row"},[n("span",is,L(t.label)+"ï¼š",1),n("span",rs,L(Ut(t.key,$.value[t.key])),1)]))),128))])):se.value==="monitoringPoints"?(v(),g("div",us,[(v(!0),g(we,null,xe($.value,(t,l)=>(v(),g("div",{key:l,class:"param-row"},[n("span",cs,L(Ht(l))+"ï¼š",1),n("span",ds,L(Xt(l,t)),1)]))),128))])):f("",!0)])):(v(),g("div",vs,e[95]||(e[95]=[n("p",null,"æš‚æ— æ°´åº“åŸºæœ¬ä¿¡æ¯æ•°æ®",-1)])))])])):f("",!0),he.value?(v(),g("div",gs,[n("span",{class:"history-panel-close",onClick:e[29]||(e[29]=t=>he.value=!1)},"Ã—"),e[122]||(e[122]=n("div",{class:"history-title"},"é˜²æ´ªå†å²",-1)),n("div",ps,[w.value==="æ€€æŸ”æ°´åº“"?(v(),g("div",ms,e[96]||(e[96]=[n("h4",null,"å†å²é˜²æ´ªè¡¨ç°",-1),n("p",null,"æ€€æŸ”æ°´åº“è‡ªå»ºæˆè‡³1985å¹´ï¼ˆ27å¹´é—´ï¼‰ï¼Œæœ‰14å¹´å…¥åº“æ´ªå³°æµé‡å¤§äº150ç«‹æ–¹ç±³/ç§’ï¼Œ10å¹´å¤§äº350ç«‹æ–¹ç±³/ç§’ï¼Œ6å¹´å¤§äº450ç«‹æ–¹ç±³/ç§’ã€‚å…¶ä¸­1972å¹´å…¥åº“æ´ªå³°æµé‡è¾¾4245ç«‹æ–¹ç±³/ç§’ï¼Œä¸ºå†å²æœ€å¤§æ´ªå³°ï¼Œæ¯”1939å¹´æ´ªå³°2400ç«‹æ–¹ç±³/ç§’å¤š1845ç«‹æ–¹ç±³/ç§’ï¼Œä½†æœªå‘ç”Ÿæ´ªæ°´ç¾å®³ã€‚",-1)]))):f("",!0),w.value==="æ€€æŸ”æ°´åº“"?(v(),g("div",fs,e[97]||(e[97]=[n("h4",null,"2023å¹´é˜²æ´ªæ€»ç»“",-1),n("p",null,'2023å¹´8æœˆ21æ—¥ï¼Œæ°´åˆ©éƒ¨å¬å¼€"23Â·7"æµ·æ²³æµåŸŸç‰¹å¤§æ´ªæ°´é˜²å¾¡æ–°é—»å‘å¸ƒä¼šã€‚å¯†äº‘ã€æ€€æŸ”æ°´åº“ç´¯è®¡æ‹¦è“„æ´ªæ°´14.68äº¿ç«‹æ–¹ç±³ï¼Œé™ä½äº†æ½®ç™½æ²³æ°´ä½ï¼Œä¸ºåŒ—è¿æ²³ä»¥è¥¿åˆ†æ´ªåˆ›é€ äº†æœ‰åˆ©æ¡ä»¶ã€‚',-1)]))):f("",!0),w.value==="æ€€æŸ”æ°´åº“"?(v(),g("div",ys,e[98]||(e[98]=[n("h4",null,"2024å¹´è“„æ°´æƒ…å†µ",-1),n("p",null,"2024å¹´6æœˆ12æ—¥ï¼ŒåŒ—äº¬å¸‚åˆ©ç”¨å—æ°´åŒ—è°ƒé…å¥—å¯†äº‘æ°´åº“è°ƒè“„å·¥ç¨‹è¿›è¡Œåå‘è°ƒæ°´ï¼Œå¯†äº‘æ°´åº“ã€æ€€æŸ”æ°´åº“ã€å¤§å®è°ƒèŠ‚æ± ã€åä¸‰é™µæ°´åº“ç´¯è®¡è“„æ°´çº¦8äº¿ç«‹æ–¹ç±³ã€‚",-1)]))):f("",!0),w.value==="æ€€æŸ”æ°´åº“"?(v(),g("div",hs,e[99]||(e[99]=[n("h4",null,"2024å¹´æ³„æ´ªæƒ…å†µ",-1),n("p",null,"2024å¹´7æœˆ26æ—¥12æ—¶èµ·ï¼Œæ€€æŸ”æ°´åº“å¼€å§‹å‘æ€€æ²³æœ‰åºæ³„æ´ªï¼Œé‡‡ç”¨é¢„æ³„æ–¹å¼ï¼Œåœ¨ç¡®ä¿ä¸‹æ¸¸å®‰å…¨çš„å‰æä¸‹ï¼Œè€ƒè™‘ä¸Šæ¸¸æ¥æ°´æƒ…å†µã€‚",-1)]))):f("",!0),w.value==="å¯†äº‘æ°´åº“"?(v(),g("div",bs,e[100]||(e[100]=[n("h4",null,"é˜²æ´ªå†å²å…³é”®äº‹ä»¶",-1),n("p",null,[n("strong",null,"å»ºåº“å‰æ°´æ‚£ä¸¥é‡ï¼š"),z("æ½®æ²³ã€ç™½æ²³ä¸Šæ¸¸å±±åŠ¿é™¡å³­ï¼Œæ°´æµæ¹æ€¥ï¼Œä¸‹æ¸¸æ²³é“å¹³æµ…ä¸”æ— å ¤é˜²ï¼Œå¸¸å¸¸æ³›æ»¥æˆç¾ã€‚1958å¹´7æœˆä¸­æ—¬ï¼Œå¯†äº‘è¿é™æš´é›¨ï¼Œä¹æ¾å±±åœ°åŒºé™æ°´é‡é«˜è¾¾280.5æ¯«ç±³ï¼Œæ½®æ²³æœ€å¤§æµé‡è¾¾3140ç«‹æ–¹ç±³/ç§’ï¼Œæ´ªæ°´æ¶Œè¿›å¯†äº‘å¿åŸï¼Œä¸œé—¨ã€å—é—¨é‡Œç§¯æ°´1ç±³å¤šæ·±ï¼Œæ½®æ²³æ²¿å²¸20å¤šä¸ªæ‘ã€2700å¤šäººè¢«æ´ªæ°´å›´å›°ã€‚")],-1),n("p",null,[n("strong",null,"å»ºè®¾æœŸé—´çš„é˜²æ´ªéšæ‚£ï¼š"),z("1958å¹´å¯†äº‘æ°´åº“åŠ¨å·¥å»ºè®¾ï¼ŒæŒ‰è¦æ±‚1959å¹´æ±›æœŸå‰ä¸»å‰¯åè¦ä¿®ç­‘åˆ°143ç±³çš„åé¡¶æ‹¦æ´ªé«˜ç¨‹ã€‚ä½†åœ¨å»ºè®¾è¿‡ç¨‹ä¸­ï¼Œç™½æ²³ä¸»åå¯¼æµå»Šé“çš„é’¢ç­‹è¢«æŠ½æ‰ä¸”è¿›æ°´å¡”æœªå»ºï¼Œå¯¼è‡´æ³„æ´ªå­˜åœ¨å±é™©ã€‚åæ¥ç»è¿‡æµ‹ç®—ï¼Œä¼°ç®—å‡ºå»Šé“å®‰å…¨æ³„æ´ªçš„æœ€é«˜æ°´ä½ä¸º130ç±³é«˜ç¨‹ï¼Œå¹¶åƒæ–¹ç™¾è®¡è¡¥å»ºè¿›æ°´å¡”ï¼Œä»¥ä¿è¯æ°´åº“å®‰å…¨åº¦æ±›ã€‚")],-1),n("p",null,[n("strong",null,"å»ºæˆåé˜²æ´ªæˆæ•ˆæ˜¾è‘—ï¼š"),z("1960å¹´å¯†äº‘æ°´åº“å»ºæˆè¿è¡Œåï¼Œå…¨éƒ¨æ‹¦è“„äº†ä¸Šæ¸¸å‘ç”Ÿçš„å„æ¬¡æ´ªæ°´ï¼Œä½¿ä¸‹æ¸¸è€•åœ°å…é­æ°´ç¾ï¼Œä¿æŠ¤äº†ä¸‹æ¸¸å†œç”°600ä¸‡äº©ã€‚æˆªè‡³2020å¹´8æœˆåº•ï¼Œå¯†äº‘æ°´åº“æ‹¦è“„å¤§äºç­‰äº1000ç«‹æ–¹ç±³/ç§’çš„å…¥åº“æ´ªå³°30ä½™æ¬¡ã€‚å…¶ä¸­ï¼Œ1994å¹´7æœˆ13æ—¥å‡ºç°å»ºåº“ä»¥æ¥æœ€å¤§æ´ªå³°æµé‡3670ç«‹æ–¹ç±³/ç§’ã€‚")],-1),n("p",null,[n("strong",null,"2025å¹´é˜²æ´ªæ–°æŒ‘æˆ˜ï¼š"),z("2025å¹´7æœˆ27æ—¥3æ—¶ï¼Œå¯†äº‘æ°´åº“å…¥åº“æµé‡è¾¾åˆ°6550ç«‹æ–¹ç±³/ç§’ï¼Œè¶…è¿‡1994å¹´çš„å†å²æœ€é«˜å€¼ã€‚28æ—¥8æ—¶ï¼Œå…¥åº“æµé‡è¾¾4550ç«‹æ–¹ç±³/ç§’ï¼Œä¸ºå†å²ç¬¬äºŒæ´ªå³°ã€‚æ­¤æ¬¡æ´ªæ°´è¿‡ç¨‹ä¸­ï¼Œå¯†äº‘æ°´åº“å……åˆ†å‘æŒ¥æ‹¦æ´ªå‰Šå³°ä½œç”¨ï¼Œ7æœˆ23æ—¥8æ—¶è‡³7æœˆ29æ—¥19æ—¶ï¼Œç´¯è®¡å…¥åº“æ°´é‡è¾¾8.1äº¿ç«‹æ–¹ç±³ï¼Œç´¯è®¡å‡ºåº“æ°´é‡1.8äº¿ç«‹æ–¹ç±³ã€‚")],-1)]))):f("",!0),w.value==="å¯†äº‘æ°´åº“"?(v(),g("div",ws,e[101]||(e[101]=[n("h4",null,"å†å²å¾„æµé‡å˜åŒ–",-1),n("p",null,[n("strong",null,"å¤šå¹´å¹³å‡å¾„æµé‡å˜åŒ–ï¼š"),z("æ ¹æ®ä¹‹å‰çš„åˆ†ææ•°æ®ï¼Œ60å¹´ä»£ä»¥å‰æµåŸŸå¤šå¹´å¹³å‡å¾„æµé‡ä¸º15äº¿ç«‹æ–¹ç±³ï¼Œ20ä¸–çºª80å¹´ä»£æœ«å‡å°‘åˆ°7-8äº¿ç«‹æ–¹ç±³ï¼Œ90å¹´ä»£ååŠæœŸå‡å°‘åˆ°2-3äº¿ç«‹æ–¹ç±³ã€‚è€Œæ ¹æ®2025å¹´çš„ä¿¡æ¯ï¼Œå¯†äº‘æ°´åº“å¤šå¹´å¹³å‡å…¥åº“æµé‡ä¸º27.1ç«‹æ–¹ç±³/ç§’ï¼Œå¤šå¹´å¹³å‡å…¥åº“å¾„æµé‡çº¦ä¸º8.55äº¿ç«‹æ–¹ç±³ã€‚")],-1),n("p",null,[n("strong",null,"ç‰¹æ®Šæ—¶æœŸå¾„æµé‡å˜åŒ–ï¼š"),z("2025å¹´7æœˆ26æ—¥-8æœˆ2æ—¥ï¼Œå¯†äº‘æ°´åº“æœ€å¤§7å¤©å…¥åº“æ°´é‡è¾¾9.8äº¿ç«‹æ–¹ç±³ï¼Œä¸ºå†å²æœ€å¤§å€¼ï¼Œè¶…è¿‡1974å¹´7æœˆ25æ—¥çš„7.14äº¿ç«‹æ–¹ç±³ã€‚2025å¹´7æœˆ27æ—¥3æ—¶å…¥åº“æµé‡6550ç«‹æ–¹ç±³/ç§’ï¼Œè¿œè¶…å¤šå¹´å¹³å‡å…¥åº“æµé‡ï¼Œæ˜¯å…¶242å€ã€‚")],-1)]))):f("",!0),w.value==="åŒ—å°ä¸Šæ°´åº“"?(v(),g("div",xs,e[102]||(e[102]=[n("h4",null,"æ°´åº“æ¦‚å†µ",-1),n("p",null,"åŒ—å°ä¸Šæ°´åº“ä½äºåŒ—äº¬å¸‚æ€€æŸ”åŒºï¼Œæ˜¯ä¸€åº§ä¸­å‹æ°´åº“ï¼Œæ€»åº“å®¹1.2äº¿ç«‹æ–¹ç±³ï¼Œä¸»è¦æ‰¿æ‹…é˜²æ´ªã€ä¾›æ°´ã€çŒæº‰ç­‰ç»¼åˆåŠŸèƒ½ã€‚",-1)]))):f("",!0),w.value==="åŒ—å°ä¸Šæ°´åº“"?(v(),g("div",Ls,e[103]||(e[103]=[n("h4",null,"é˜²æ´ªåŠŸèƒ½",-1),n("p",null,"åŒ—å°ä¸Šæ°´åº“æ˜¯æ½®ç™½æ²³æµåŸŸçš„é‡è¦é˜²æ´ªå·¥ç¨‹ï¼Œé€šè¿‡æ‹¦è“„æ´ªæ°´ï¼Œæœ‰æ•ˆä¿æŠ¤ä¸‹æ¸¸åœ°åŒºçš„é˜²æ´ªå®‰å…¨ï¼Œåœ¨å¤šæ¬¡æ´ªæ°´æœŸé—´å‘æŒ¥äº†é‡è¦ä½œç”¨ã€‚",-1)]))):f("",!0),w.value==="åŒ—å°ä¸Šæ°´åº“"?(v(),g("div",ks,e[104]||(e[104]=[n("h4",null,"ä¾›æ°´ä½œç”¨",-1),n("p",null,"åŒ—å°ä¸Šæ°´åº“ä¸ºå‘¨è¾¹åœ°åŒºæä¾›å†œä¸šçŒæº‰ç”¨æ°´å’Œç”Ÿæ€è¡¥æ°´ï¼Œæ˜¯åŒºåŸŸæ°´èµ„æºè°ƒé…çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚",-1)]))):f("",!0),w.value==="åŒ—å°ä¸Šæ°´åº“"?(v(),g("div",Ms,e[105]||(e[105]=[n("h4",null,"ç”Ÿæ€ä»·å€¼",-1),n("p",null,"åŒ—å°ä¸Šæ°´åº“å‘¨è¾¹ç”Ÿæ€ç¯å¢ƒè‰¯å¥½ï¼Œæ˜¯é‡è¦çš„æ¹¿åœ°ç”Ÿæ€ç³»ç»Ÿï¼Œä¸ºé‡ç”ŸåŠ¨æ¤ç‰©æä¾›äº†è‰¯å¥½çš„æ –æ¯ç¯å¢ƒã€‚",-1)]))):f("",!0),w.value==="åä¸‰é™µæ°´åº“"?(v(),g("div",Cs,e[106]||(e[106]=[n("h4",null,"æ°´åº“æ¦‚å†µ",-1),n("p",null,"åä¸‰é™µæ°´åº“ä½äºåŒ—äº¬å¸‚æ˜Œå¹³åŒºï¼Œæ˜¯ä¸€åº§ä¸­å‹æ°´åº“ï¼Œæ€»åº“å®¹2.8äº¿ç«‹æ–¹ç±³ï¼Œä¸»è¦æ‰¿æ‹…é˜²æ´ªã€ä¾›æ°´ã€çŒæº‰ç­‰ç»¼åˆåŠŸèƒ½ï¼Œæ˜¯æ¸©æ¦†æ²³æµåŸŸçš„é‡è¦æ°´åˆ©å·¥ç¨‹ã€‚",-1)]))):f("",!0),w.value==="åä¸‰é™µæ°´åº“"?(v(),g("div",Es,e[107]||(e[107]=[n("h4",null,"é˜²æ´ªåŠŸèƒ½",-1),n("p",null,"åä¸‰é™µæ°´åº“æ˜¯æ¸©æ¦†æ²³æµåŸŸçš„é‡è¦é˜²æ´ªå·¥ç¨‹ï¼Œé€šè¿‡æ‹¦è“„æ´ªæ°´ï¼Œæœ‰æ•ˆä¿æŠ¤ä¸‹æ¸¸åŒ—äº¬åŸåŒºå’Œå‘¨è¾¹åœ°åŒºçš„é˜²æ´ªå®‰å…¨ï¼Œåœ¨å¤šæ¬¡æ´ªæ°´æœŸé—´å‘æŒ¥äº†é‡è¦ä½œç”¨ã€‚",-1)]))):f("",!0),w.value==="åä¸‰é™µæ°´åº“"?(v(),g("div",As,e[108]||(e[108]=[n("h4",null,"ä¾›æ°´ä½œç”¨",-1),n("p",null,"åä¸‰é™µæ°´åº“ä¸ºæ˜Œå¹³åŒºåŠå‘¨è¾¹åœ°åŒºæä¾›å†œä¸šçŒæº‰ç”¨æ°´å’Œç”Ÿæ€è¡¥æ°´ï¼Œæ˜¯åŒºåŸŸæ°´èµ„æºè°ƒé…çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¿éšœäº†åŒºåŸŸä¾›æ°´å®‰å…¨ã€‚",-1)]))):f("",!0),w.value==="åä¸‰é™µæ°´åº“"?(v(),g("div",$s,e[109]||(e[109]=[n("h4",null,"æ—…æ¸¸ä»·å€¼",-1),n("p",null,"åä¸‰é™µæ°´åº“å‘¨è¾¹ç¯å¢ƒä¼˜ç¾ï¼Œæ˜¯é‡è¦çš„æ—…æ¸¸ä¼‘é—²åœºæ‰€ï¼Œä¸æ˜åä¸‰é™µæ™¯åŒºç›¸å‘¼åº”ï¼Œå½¢æˆäº†ç‹¬ç‰¹çš„äººæ–‡æ™¯è§‚ã€‚",-1)]))):f("",!0),w.value==="å®˜å…æ°´åº“"?(v(),g("div",Ss,e[110]||(e[110]=[n("h4",null,"æ°´åº“æ¦‚å†µ",-1),n("p",null,"å®˜å…æ°´åº“ä½äºåŒ—äº¬å¸‚å»¶åº†åŒºï¼Œæ˜¯ä¸€åº§å¤§å‹æ°´åº“ï¼Œæ€»åº“å®¹41.6äº¿ç«‹æ–¹ç±³ï¼Œæ˜¯åŒ—äº¬å¸‚æœ€å¤§çš„æ°´åº“ä¹‹ä¸€ï¼Œä¸»è¦æ‰¿æ‹…é˜²æ´ªã€ä¾›æ°´ã€å‘ç”µç­‰ç»¼åˆåŠŸèƒ½ï¼Œæ˜¯æ°¸å®šæ²³æµåŸŸçš„é‡è¦æ°´åˆ©å·¥ç¨‹ã€‚",-1)]))):f("",!0),w.value==="å®˜å…æ°´åº“"?(v(),g("div",Ps,e[111]||(e[111]=[n("h4",null,"é˜²æ´ªåŠŸèƒ½",-1),n("p",null,"å®˜å…æ°´åº“æ˜¯æ°¸å®šæ²³æµåŸŸçš„é‡è¦é˜²æ´ªå·¥ç¨‹ï¼Œé€šè¿‡æ‹¦è“„æ´ªæ°´ï¼Œæœ‰æ•ˆä¿æŠ¤ä¸‹æ¸¸åŒ—äº¬åŸåŒºå’Œå‘¨è¾¹åœ°åŒºçš„é˜²æ´ªå®‰å…¨ï¼Œåœ¨å¤šæ¬¡ç‰¹å¤§æ´ªæ°´æœŸé—´å‘æŒ¥äº†å…³é”®ä½œç”¨ã€‚",-1)]))):f("",!0),w.value==="å®˜å…æ°´åº“"?(v(),g("div",Fs,e[112]||(e[112]=[n("h4",null,"ä¾›æ°´ä½œç”¨",-1),n("p",null,"å®˜å…æ°´åº“ä¸ºåŒ—äº¬å¸‚æä¾›é‡è¦çš„é¥®ç”¨æ°´æºï¼Œé€šè¿‡å—æ°´åŒ—è°ƒå·¥ç¨‹ï¼Œä¸ºåŒ—äº¬åŸå¸‚ä¾›æ°´ç³»ç»Ÿæä¾›è¡¥å……æ°´æºï¼Œä¿éšœäº†é¦–éƒ½ä¾›æ°´å®‰å…¨ã€‚",-1)]))):f("",!0),w.value==="å®˜å…æ°´åº“"?(v(),g("div",Ds,e[113]||(e[113]=[n("h4",null,"å‘ç”µåŠŸèƒ½",-1),n("p",null,"å®˜å…æ°´åº“å»ºæœ‰æ°´åŠ›å‘ç”µç«™ï¼Œä¸ºåŒ—äº¬å¸‚æä¾›æ¸…æ´èƒ½æºï¼Œæ˜¯åŒ—äº¬å¸‚é‡è¦çš„å¯å†ç”Ÿèƒ½æºåŸºåœ°ä¹‹ä¸€ã€‚",-1)]))):f("",!0),w.value==="å´‡é’æ°´åº“"?(v(),g("div",zs,e[114]||(e[114]=[n("h4",null,"æ°´åº“æ¦‚å†µ",-1),n("p",null,"å´‡é’æ°´åº“ä½äºåŒ—äº¬å¸‚æ€€æŸ”åŒºï¼Œæ˜¯ä¸€åº§å°å‹æ°´åº“ï¼Œæ€»åº“å®¹0.8äº¿ç«‹æ–¹ç±³ï¼Œä¸»è¦æ‰¿æ‹…é˜²æ´ªã€çŒæº‰ã€ç”Ÿæ€è¡¥æ°´ç­‰ç»¼åˆåŠŸèƒ½ï¼Œæ˜¯æ½®ç™½æ²³æµåŸŸçš„é‡è¦æ°´åˆ©å·¥ç¨‹ã€‚",-1)]))):f("",!0),w.value==="å´‡é’æ°´åº“"?(v(),g("div",Ts,e[115]||(e[115]=[n("h4",null,"é˜²æ´ªåŠŸèƒ½",-1),n("p",null,"å´‡é’æ°´åº“æ˜¯æ½®ç™½æ²³æµåŸŸçš„é‡è¦é˜²æ´ªå·¥ç¨‹ï¼Œé€šè¿‡æ‹¦è“„æ´ªæ°´ï¼Œæœ‰æ•ˆä¿æŠ¤ä¸‹æ¸¸åœ°åŒºçš„é˜²æ´ªå®‰å…¨ï¼Œåœ¨å¤šæ¬¡æ´ªæ°´æœŸé—´å‘æŒ¥äº†é‡è¦ä½œç”¨ã€‚",-1)]))):f("",!0),w.value==="å´‡é’æ°´åº“"?(v(),g("div",Is,e[116]||(e[116]=[n("h4",null,"çŒæº‰ä½œç”¨",-1),n("p",null,"å´‡é’æ°´åº“ä¸ºå‘¨è¾¹å†œç”°æä¾›çŒæº‰ç”¨æ°´ï¼Œä¿éšœäº†å†œä¸šç”Ÿäº§çš„ç¨³å®šï¼Œæ˜¯åŒºåŸŸå†œä¸šå‘å±•çš„é‡è¦æ°´æºä¿éšœã€‚",-1)]))):f("",!0),w.value==="å´‡é’æ°´åº“"?(v(),g("div",Ns,e[117]||(e[117]=[n("h4",null,"ç”Ÿæ€ä»·å€¼",-1),n("p",null,"å´‡é’æ°´åº“å‘¨è¾¹ç”Ÿæ€ç¯å¢ƒè‰¯å¥½ï¼Œä¸ºé‡ç”ŸåŠ¨æ¤ç‰©æä¾›äº†è‰¯å¥½çš„æ –æ¯ç¯å¢ƒï¼Œæ˜¯é‡è¦çš„ç”Ÿæ€ä¿æŠ¤åŒºåŸŸã€‚",-1)]))):f("",!0),w.value==="æ–‹å ‚æ°´åº“"?(v(),g("div",_s,e[118]||(e[118]=[n("h4",null,"æ°´åº“æ¦‚å†µ",-1),n("p",null,"æ–‹å ‚æ°´åº“ä½äºåŒ—äº¬å¸‚é—¨å¤´æ²ŸåŒºï¼Œæ˜¯ä¸€åº§ä¸­å‹æ°´åº“ï¼Œæ€»åº“å®¹1.5äº¿ç«‹æ–¹ç±³ï¼Œä¸»è¦æ‰¿æ‹…é˜²æ´ªã€ä¾›æ°´ã€çŒæº‰ç­‰ç»¼åˆåŠŸèƒ½ï¼Œæ˜¯æ°¸å®šæ²³æµåŸŸçš„é‡è¦æ°´åˆ©å·¥ç¨‹ã€‚",-1)]))):f("",!0),w.value==="æ–‹å ‚æ°´åº“"?(v(),g("div",js,e[119]||(e[119]=[n("h4",null,"é˜²æ´ªåŠŸèƒ½",-1),n("p",null,"æ–‹å ‚æ°´åº“æ˜¯æ°¸å®šæ²³æµåŸŸçš„é‡è¦é˜²æ´ªå·¥ç¨‹ï¼Œé€šè¿‡æ‹¦è“„æ´ªæ°´ï¼Œæœ‰æ•ˆä¿æŠ¤ä¸‹æ¸¸é—¨å¤´æ²ŸåŒºå’Œå‘¨è¾¹åœ°åŒºçš„é˜²æ´ªå®‰å…¨ï¼Œåœ¨å¤šæ¬¡æ´ªæ°´æœŸé—´å‘æŒ¥äº†é‡è¦ä½œç”¨ã€‚",-1)]))):f("",!0),w.value==="æ–‹å ‚æ°´åº“"?(v(),g("div",Vs,e[120]||(e[120]=[n("h4",null,"ä¾›æ°´ä½œç”¨",-1),n("p",null,"æ–‹å ‚æ°´åº“ä¸ºé—¨å¤´æ²ŸåŒºåŠå‘¨è¾¹åœ°åŒºæä¾›ç”Ÿæ´»ç”¨æ°´å’Œå†œä¸šçŒæº‰ç”¨æ°´ï¼Œæ˜¯åŒºåŸŸæ°´èµ„æºè°ƒé…çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚",-1)]))):f("",!0),w.value==="æ–‹å ‚æ°´åº“"?(v(),g("div",Bs,e[121]||(e[121]=[n("h4",null,"ç”Ÿæ€ä¿æŠ¤",-1),n("p",null,"æ–‹å ‚æ°´åº“å‘¨è¾¹ç”Ÿæ€ç¯å¢ƒä¼˜ç¾ï¼Œæ˜¯é‡è¦çš„ç”Ÿæ€ä¿æŠ¤åŒºåŸŸï¼Œä¸ºé‡ç”ŸåŠ¨æ¤ç‰©æä¾›äº†è‰¯å¥½çš„æ –æ¯ç¯å¢ƒã€‚",-1)]))):f("",!0)])])):f("",!0),n("div",Rs,[n("img",{src:Nn,alt:"æ‰“å¼€mxd",title:"æ‰“å¼€mxd",onClick:rt}),n("div",Os,[n("img",{src:_n,alt:"æ”¾å¤§",title:"æ”¾å¤§",onClick:e[30]||(e[30]=t=>B("zoomIn")),class:W({"active-tool":A.zoomIn.isActive||A.rectangleZoom.isActive})},null,2),ce.value?(v(),g("div",Zs,[n("div",{class:"zoom-option",onClick:e[31]||(e[31]=t=>B("zoomIn"))},e[123]||(e[123]=[n("span",null,"æŒ‰ç‚¹æ”¾å¤§",-1)])),n("div",{class:"zoom-option",onClick:e[32]||(e[32]=t=>B("rectangleZoom"))},e[124]||(e[124]=[n("span",null,"æ‹‰æ¡†æ”¾å¤§",-1)]))])):f("",!0)]),T.value?(v(),g("div",{key:0,class:"cancel-drawing-btn",onClick:un},e[125]||(e[125]=[n("span",null,"âŒ",-1)]))):f("",!0),n("div",Us,[n("img",{src:jn,alt:"ç¼©å°",title:"ç¼©å°",onClick:e[33]||(e[33]=t=>B("zoomOut")),class:W({"active-tool":A.zoomOut.isActive||A.rectangleZoomOut.isActive})},null,2),ne.value?(v(),g("div",Ws,[n("div",{class:"zoom-option",onClick:e[34]||(e[34]=t=>B("zoomOut"))},e[126]||(e[126]=[n("span",null,"æŒ‰ç‚¹ç¼©å°",-1)])),n("div",{class:"zoom-option",onClick:e[35]||(e[35]=t=>B("rectangleZoomOut"))},e[127]||(e[127]=[n("span",null,"æ‹‰æ¡†ç¼©å°",-1)]))])):f("",!0)]),n("img",{src:Vn,alt:"å…¨å›¾",title:"å…¨å›¾",onClick:wo}),n("img",{src:Bn,alt:"å¹³ç§»",title:"å¹³ç§»",onClick:e[36]||(e[36]=t=>B("pan")),class:W({"active-tool":A.pan.isActive})},null,2),n("img",{src:Rn,alt:"é€‰æ‹©è¦ç´ ",title:"é€‰æ‹©è¦ç´ ",onClick:e[37]||(e[37]=t=>B("selectFeature")),class:W({"active-tool":A.selectFeature.isActive})},null,2),I.value.size>0?(v(),g("div",{key:1,class:"clear-selection-btn",onClick:to,title:"æ¸…é™¤æ‰€æœ‰é€‰æ‹©"},e[128]||(e[128]=[n("span",null,"ğŸ—‘ï¸",-1)]))):f("",!0),n("img",{src:On,alt:"æŸ¥è¯¢",title:"æŸ¥è¯¢",onClick:e[38]||(e[38]=t=>B("query")),class:W({"active-tool":A.query.isActive})},null,2),n("img",{src:Zn,alt:"æ°´åº“ç›‘æµ‹æ•°æ®å¯è§†åŒ–æ¸²æŸ“",title:"æ°´åº“ç›‘æµ‹æ•°æ®å¯è§†åŒ–æ¸²æŸ“",onClick:e[39]||(e[39]=t=>B("render")),class:W({"active-tool":A.render.isActive})},null,2),n("img",{src:Un,alt:"è¯†åˆ«è¦ç´ ",title:"è¯†åˆ«è¦ç´ ",onClick:e[40]||(e[40]=t=>B("identifyFeature")),class:W({"active-tool":A.identifyFeature.isActive})},null,2),n("img",{src:Wn,alt:"æ ‡æ³¨",title:"æ ‡æ³¨",onClick:e[41]||(e[41]=t=>B("annotation")),class:W({"active-tool":A.annotation.isActive})},null,2),n("img",{src:Yn,alt:"è¿”å›ä¸Šä¸€è§†å›¾",title:"è¿”å›ä¸Šä¸€è§†å›¾",onClick:at,class:W({"disabled-tool":!vo.value})},null,2),n("img",{src:Hn,alt:"è½¬è‡³ä¸‹ä¸€è§†å›¾",title:"è½¬è‡³ä¸‹ä¸€è§†å›¾",onClick:it,class:W({"disabled-tool":!go.value})},null,2)]),A.query.isActive?(v(),g("div",{key:3,class:"search-bar-modal",ref_key:"queryPopup",ref:Ce},[n("div",Ys,[n("div",{class:"search-header",onMousedown:Co,onTouchstart:Co},[e[129]||(e[129]=n("h3",null,"å›¾å±‚æŸ¥è¯¢",-1)),n("div",Hs,[n("span",{class:"search-reset",onClick:Lt,title:"é‡ç½®ä½ç½®"},"â†º"),n("span",{class:"search-close",onClick:e[42]||(e[42]=t=>B("query"))},"Ã—")])],32),n("div",Xs,[e[131]||(e[131]=n("label",{class:"layer-selection-label"},"é€‰æ‹©æŸ¥è¯¢å›¾å±‚ï¼š",-1)),k(n("select",{"onUpdate:modelValue":e[43]||(e[43]=t=>Qe.value=t),class:"layer-select-dropdown"},e[130]||(e[130]=[Zo('<option value="monitoringPoints" data-v-5094e410>ç›‘æµ‹ç‚¹</option><option value="beijingReservoirs" data-v-5094e410>æ°´åº“</option><option value="settlements" data-v-5094e410>å±…æ°‘ç‚¹</option><option value="districts" data-v-5094e410>è¡Œæ”¿åŒºåˆ’</option><option value="waterLines" data-v-5094e410>æ²³æµ</option>',5)]),512),[[Le,Qe.value]])]),n("div",qs,[k(n("input",{"onUpdate:modelValue":e[44]||(e[44]=t=>Ve.value=t),onKeyup:Tn(To,["enter"]),class:"search-input",placeholder:Bt(),autofocus:""},null,40,Gs),[[O,Ve.value]]),n("button",{class:"search-btn",onClick:To},"æŸ¥è¯¢")])]),de.value?(v(),g("div",Qs,L(de.value),1)):f("",!0)],512)):f("",!0),re.value?(v(),g("div",Js,[e[132]||(e[132]=n("div",{class:"loading-spinner"},null,-1)),e[133]||(e[133]=n("div",{class:"loading-text"},"æ­£åœ¨åŠ è½½åœ°ç†æ•°æ®...",-1)),n("div",Ks,[n("div",ea,[n("div",{class:"progress-fill",style:fe({width:ye.value+"%"})},null,4)]),n("div",oa,L(ye.value)+"%",1)]),n("button",{onClick:lt,class:"force-close-btn"},"è·³è¿‡åŠ è½½")])):f("",!0),n("input",{type:"file",ref_key:"mxdFileInput",ref:Io,style:{display:"none"},onChange:ut,accept:".mxd"},null,544),po.value?(v(),g("div",ta,[n("div",na,[n("h3",null,L(mo.value?mo.value.name:"MXDæ–‡æ¡£"),1),n("span",{class:"mxd-close-btn",onClick:e[45]||(e[45]=t=>po.value=!1)},"Ã—")]),n("div",la,[n("div",sa,[n("div",aa,[e[135]||(e[135]=n("div",{class:"mxd-layer-group-header"},[n("img",{class:"folder-icon",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmkgZm9sZGVyMi1vcGVuIiB2aWV3Qm94PSIwIDAgMTYgMTYiPgogIDxwYXRoIGQ9Ik0xIDMuNUExLjUgMS41IDAgMCAxIDIuNSAyaDIuNzY0Yy4wNTggMCAuMTE1LjAxNy4xNjcuMDQ4LjA1Mi4wMzEuMS4wNzQuMTM0LjEyNkw2LjcwNyAzLjVIMTMuNWEuNSA1IDAgMCAxIDAgMUg2LjcwN2wtMS4xNDMgMS4zNTJBLjUuNSAwIDAgMSA1LjIzNiA2SDIuNUEuNS41IDAgMCAxIDIgNS41VjR6TTIuNSAzaDIuNzY0Yy4wNTggMCAuMTE1LjAxNy4xNjcuMDQ4LjA1Mi4wMzEuMS4wNzQuMTM0LjEyNkw2LjcwNyA0LjVIMTMuNWEuNS41IDAgMCAxIC41LjV2N2ExLjUgMS41IDAgMCAxLTEuNSAxLjVoLTlBMS41IDEuNSAwIDAgMSAyIDEyVjYuNWguNVYxMmExIDEgMCAwIDAgMSAxaDlhMSAxIDAgMCAwIDEtMVY1aC05LjVhLjUuNSAwIDAgMS0uNDI4LS4yMzJsLTEuMjQxLTEuNTM4QTEuNSAxLjUgMCAwIDAgLjk1IDNIMi41eiIvPgogPC9zdmc+"}),n("span",null,"å›¾å±•")],-1)),n("div",ia,[(v(!0),g(we,null,xe(Pe.value.slice(1),t=>(v(),g("div",{key:t.id,class:"mxd-layer-item",style:{marginLeft:"20px"}},[k(n("input",{type:"checkbox",id:"mxd-layer-"+t.id,"onUpdate:modelValue":l=>t.visible=l,onChange:l=>ko(t)},null,40,ra),[[G,t.visible]]),n("label",{for:"mxd-layer-"+t.id,class:"layer-label"},[n("span",{class:"layer-icon",style:fe(ct(t))},null,4),n("span",ca,L(t.name),1)],8,ua)]))),128)),Pe.value[0].children&&Pe.value[0].children.length?(v(),g("div",da,[k(n("input",{type:"checkbox",id:"mxd-layer-beijing-resident-places","onUpdate:modelValue":e[46]||(e[46]=t=>Pe.value[0].children[0].visible=t),onChange:e[47]||(e[47]=t=>ko(Pe.value[0].children[0]))},null,544),[[G,Pe.value[0].children[0].visible]]),e[134]||(e[134]=n("label",{for:"mxd-layer-beijing-resident-places",class:"layer-label"},[n("span",{class:"layer-icon point-icon"}),n("span",{class:"layer-name"},"å±…æ°‘åœ°åœ°å")],-1))])):f("",!0)])])]),e[136]||(e[136]=n("div",{class:"mxd-properties"},[n("h4",null,"æ–‡æ¡£å±æ€§"),n("div",{class:"mxd-property-item"},[n("span",null,"æ–‡ä»¶å¤§å°:"),n("span",null,"592.00 KB")]),n("div",{class:"mxd-property-item"},[n("span",null,"ä¿®æ”¹æ—¥æœŸ:"),n("span",null,"2025/4/11 17:16:19")]),n("div",{class:"mxd-property-item"},[n("span",null,"å›¾å±‚æ•°é‡:"),n("span",null,"8")])],-1))])])):f("",!0),A.render.isActive?(v(),g("div",{key:6,class:"render-modal",ref_key:"renderModal",ref:_e},[n("div",va,[n("div",{class:"render-modal-header",onMousedown:Eo,onTouchstart:Eo},[e[137]||(e[137]=n("span",null,"æ•°æ®åˆ†çº§æ¸²æŸ“",-1)),n("div",ga,[n("span",{class:"render-modal-reset",onClick:kt,title:"é‡ç½®ä½ç½®"},"â†º"),n("span",{class:"render-modal-close",onClick:e[48]||(e[48]=t=>B("render"))},"Ã—")])],32),n("div",pa,[n("div",ma,[e[139]||(e[139]=n("label",null,"å›¾å±‚ï¼š",-1)),k(n("select",{"onUpdate:modelValue":e[49]||(e[49]=t=>_.value=t),class:"render-select",onChange:Kt},e[138]||(e[138]=[n("option",{value:"monitoringPoints"},"ç›‘æµ‹ç‚¹",-1),n("option",{value:"beijingReservoirs"},"æ°´åº“",-1)]),544),[[Le,_.value]])]),n("div",fa,[e[140]||(e[140]=n("label",null,"å­—æ®µï¼š",-1)),k(n("select",{"onUpdate:modelValue":e[50]||(e[50]=t=>Z.value=t),class:"render-select",onChange:en},[(v(!0),g(we,null,xe(Jt.value,t=>(v(),g("option",{key:t.value,value:t.value},L(t.label),9,ya))),128))],544),[[Le,Z.value]])]),n("div",ha,[e[141]||(e[141]=n("label",null,"åˆ†çº§ï¼š",-1)),k(n("select",{"onUpdate:modelValue":e[51]||(e[51]=t=>oe.value=t),class:"render-select",onChange:on},[(v(),g(we,null,xe(6,t=>n("option",{key:t,value:t},L(t)+"çº§",9,ba)),64))],544),[[Le,oe.value]])]),n("div",{class:"render-row"},[n("button",{class:"render-btn",onClick:nn},"æ¸²æŸ“"),n("button",{class:"render-reset-btn",onClick:ln},"é‡ç½®")]),U.value?(v(),g("div",wa,L(U.value),1)):f("",!0)])])],512)):f("",!0),ge.value?(v(),g("div",xa,[n("div",La,[n("h4",null,L(No.value),1),n("span",{class:"legend-close",onClick:e[52]||(e[52]=t=>ge.value=!1)},"Ã—")]),n("div",ka,[(v(!0),g(we,null,xe(_o.value,(t,l)=>(v(),g("div",{key:l,class:"legend-item"},[n("div",{class:"legend-color",style:fe({backgroundColor:t.color})},null,4),n("div",Ma,[n("span",Ca,L(t.min)+" - "+L(t.max),1),n("span",Ea,"("+L(t.count)+"ä¸ª)",1)])]))),128))])])):f("",!0),r.isActive?(v(),g("div",{key:8,class:"annotation-control-panel",ref_key:"annotationControlPanel",ref:Me},[n("div",{class:"annotation-panel-header",onMousedown:Mo,onTouchstart:Mo},[e[142]||(e[142]=n("h4",null,"æ ‡æ³¨æ§åˆ¶",-1)),n("div",Aa,[n("span",{class:"annotation-panel-reset",onClick:xt,title:"é‡ç½®ä½ç½®"},"ğŸ”„"),n("span",{class:"annotation-panel-close",onClick:e[53]||(e[53]=t=>r.isActive=!1)},"Ã—")])],32),n("div",$a,[n("div",Sa,[e[146]||(e[146]=n("h5",null,"å›¾å±‚å’Œå­—æ®µé€‰æ‹©",-1)),n("div",Pa,[e[144]||(e[144]=n("label",null,"é€‰æ‹©å›¾å±‚:",-1)),k(n("select",{"onUpdate:modelValue":e[54]||(e[54]=t=>r.selectedLayer=t),onChange:sn,class:"annotation-select"},e[143]||(e[143]=[Zo('<option value="monitoringPoints" data-v-5094e410>ç›‘æµ‹ç‚¹</option><option value="beijingReservoirs" data-v-5094e410>æ°´åº“</option><option value="settlements" data-v-5094e410>å±…æ°‘ç‚¹</option><option value="districts" data-v-5094e410>è¡Œæ”¿åŒºåˆ’</option><option value="waterLines" data-v-5094e410>æ²³æµ</option>',5)]),544),[[Le,r.selectedLayer]])]),n("div",Fa,[e[145]||(e[145]=n("label",null,"é€‰æ‹©å­—æ®µ:",-1)),k(n("select",{"onUpdate:modelValue":e[55]||(e[55]=t=>r.selectedField=t),onChange:an,class:"annotation-select"},[(v(!0),g(we,null,xe(r.availableFields,t=>(v(),g("option",{key:t.value,value:t.value},L(t.label),9,Da))),128))],544),[[Le,r.selectedField]])]),n("div",{class:"control-item"},[n("button",{onClick:Vo,class:"annotation-btn"},"ç”Ÿæˆå­—æ®µæ ‡æ³¨")])]),n("div",za,[e[150]||(e[150]=n("h5",null,"æ˜¾ç¤ºæ§åˆ¶",-1)),n("div",Ta,[n("label",null,[k(n("input",{type:"checkbox","onUpdate:modelValue":e[56]||(e[56]=t=>r.showAutoLabels=t),onChange:je},null,544),[[G,r.showAutoLabels]]),e[147]||(e[147]=z(" æ˜¾ç¤ºè‡ªåŠ¨æ ‡æ³¨ ",-1))])]),n("div",Ia,[n("label",null,[k(n("input",{type:"checkbox","onUpdate:modelValue":e[57]||(e[57]=t=>r.showManualLabels=t)},null,512),[[G,r.showManualLabels]]),e[148]||(e[148]=z(" æ˜¾ç¤ºæ‰‹åŠ¨æ ‡æ³¨ ",-1))])]),n("div",Na,[n("label",null,[k(n("input",{type:"checkbox","onUpdate:modelValue":e[58]||(e[58]=t=>r.overlapAvoidance=t),onChange:je},null,544),[[G,r.overlapAvoidance]]),e[149]||(e[149]=z(" é‡å é¿è®© ",-1))])])]),n("div",_a,[e[153]||(e[153]=n("h5",null,"ç¼©æ”¾æ§åˆ¶",-1)),n("div",ja,[e[151]||(e[151]=n("label",null,"æœ€å°ç¼©æ”¾:",-1)),k(n("input",{type:"number","onUpdate:modelValue":e[59]||(e[59]=t=>r.minZoom=t),min:"1",max:"20",onChange:ro},null,544),[[O,r.minZoom]])]),n("div",Va,[e[152]||(e[152]=n("label",null,"æœ€å¤§ç¼©æ”¾:",-1)),k(n("input",{type:"number","onUpdate:modelValue":e[60]||(e[60]=t=>r.maxZoom=t),min:"1",max:"20",onChange:ro},null,544),[[O,r.maxZoom]])])]),n("div",Ba,[e[163]||(e[163]=n("h5",null,"æ ·å¼è®¾ç½®",-1)),n("div",Ra,[e[154]||(e[154]=n("label",null,"å­—ä½“å¤§å°:",-1)),k(n("input",{type:"number","onUpdate:modelValue":e[61]||(e[61]=t=>r.currentStyle.fontSize=t),min:"8",max:"32",onChange:ue},null,544),[[O,r.currentStyle.fontSize]])]),n("div",Oa,[e[156]||(e[156]=n("label",null,"å­—ä½“:",-1)),k(n("select",{"onUpdate:modelValue":e[62]||(e[62]=t=>r.currentStyle.fontFamily=t),onChange:ue},e[155]||(e[155]=[n("option",{value:"Arial"},"Arial",-1),n("option",{value:"Times New Roman"},"Times New Roman",-1),n("option",{value:"Microsoft YaHei"},"å¾®è½¯é›…é»‘",-1),n("option",{value:"SimSun"},"å®‹ä½“",-1)]),544),[[Le,r.currentStyle.fontFamily]])]),n("div",Za,[e[157]||(e[157]=n("label",null,"æ–‡å­—é¢œè‰²:",-1)),k(n("input",{type:"color","onUpdate:modelValue":e[63]||(e[63]=t=>r.currentStyle.color=t),onChange:ue},null,544),[[O,r.currentStyle.color]])]),n("div",Ua,[e[158]||(e[158]=n("label",null,"èƒŒæ™¯é¢œè‰²:",-1)),k(n("input",{type:"color","onUpdate:modelValue":e[64]||(e[64]=t=>r.currentStyle.backgroundColor=t),onChange:ue},null,544),[[O,r.currentStyle.backgroundColor]])]),n("div",Wa,[e[159]||(e[159]=n("label",null,"è¾¹æ¡†é¢œè‰²:",-1)),k(n("input",{type:"color","onUpdate:modelValue":e[65]||(e[65]=t=>r.currentStyle.borderColor=t),onChange:ue},null,544),[[O,r.currentStyle.borderColor]])]),n("div",Ya,[e[160]||(e[160]=n("label",null,"è¾¹æ¡†å®½åº¦:",-1)),k(n("input",{type:"number","onUpdate:modelValue":e[66]||(e[66]=t=>r.currentStyle.borderWidth=t),min:"0",max:"5",onChange:ue},null,544),[[O,r.currentStyle.borderWidth]])]),n("div",Ha,[e[161]||(e[161]=n("label",null,"åœ†è§’:",-1)),k(n("input",{type:"number","onUpdate:modelValue":e[67]||(e[67]=t=>r.currentStyle.borderRadius=t),min:"0",max:"20",onChange:ue},null,544),[[O,r.currentStyle.borderRadius]])]),n("div",Xa,[n("label",null,[k(n("input",{type:"checkbox","onUpdate:modelValue":e[68]||(e[68]=t=>r.currentStyle.shadow=t),onChange:ue},null,544),[[G,r.currentStyle.shadow]]),e[162]||(e[162]=z(" é˜´å½±æ•ˆæœ ",-1))])])]),n("div",{class:"annotation-section"},[e[164]||(e[164]=n("h5",null,"æ“ä½œ",-1)),n("div",{class:"control-item"},[n("button",{onClick:St,class:"annotation-btn"},"ç”Ÿæˆè‡ªåŠ¨æ ‡æ³¨")]),n("div",{class:"control-item"},[n("button",{onClick:zt,class:"annotation-btn annotation-btn-danger"},"æ¸…é™¤æ‰€æœ‰æ ‡æ³¨")])])])],512)):f("",!0)])]))}},Ja=Uo(qa,[["__scopeId","data-v-5094e410"]]);export{Ja as default};
